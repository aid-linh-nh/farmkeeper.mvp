<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmKeeper Mobile - V∆∞·ªùn Anh Hi·ªÅn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Mobile-first responsive design */
        .mobile-container {
            max-width: 390px;
            margin: 0 auto;
            background: #f8fafc;
            min-height: 100vh;
            position: relative;
            border: 1px solid #e2e8f0;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .status-bar {
            height: 24px;
            background: #000;
            color: white;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 16px;
        }
        
        .app-header {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 12px 16px;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .content-area {
            flex: 1;
            padding-bottom: 80px;
            overflow-y: auto;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 390px;
            background: white;
            border-top: 1px solid #e2e8f0;
            padding: 8px 0;
            display: flex;
            justify-content: around;
            z-index: 100;
        }
        
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 8px 4px;
            color: #6b7280;
            transition: all 0.2s;
        }
        
        .nav-item.active {
            color: #10b981;
        }
        
        .nav-item i {
            display: block;
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .nav-item span {
            font-size: 11px;
            font-weight: 500;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid #f1f5f9;
        }
        
        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            border: 1px solid #f1f5f9;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .alert-badge {
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: -6px;
            right: -6px;
            animation: pulse 2s infinite;
        }
        
        .zone-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 16px 0;
        }
        
        .zone-item {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .zone-item:active {
            transform: scale(0.95);
        }
        
        .zone-healthy { background: #10b981; }
        .zone-warning { background: #f59e0b; }
        .zone-critical { background: #ef4444; }
        .zone-new { background: #3b82f6; }
        
        .task-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid #10b981;
        }
        
        .task-urgent { border-left-color: #ef4444; }
        .task-high { border-left-color: #f59e0b; }
        .task-medium { border-left-color: #3b82f6; }
        
        .fab {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #10b981;
            color: white;
            border: none;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            z-index: 90;
            transition: all 0.2s;
        }
        
        .fab:active {
            transform: scale(0.95);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .sensor-value {
            font-size: 24px;
            font-weight: bold;
            color: #059669;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }
        
        .status-good { background: #10b981; }
        .status-warning { background: #f59e0b; }
        .status-critical { background: #ef4444; }
        
        .quick-action {
            background: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .quick-action:active {
            transform: scale(0.95);
            background: #f8fafc;
        }
        
        .material-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .material-item:last-child {
            border-bottom: none;
        }

        /* Process Tab Styles */
        .process-nav-btn {
            flex-shrink: 0;
            background: white;
            border: 1px solid #e2e8f0;
            color: #6b7280;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .process-nav-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .process-section {
            display: none;
        }
        
        .process-section.active {
            display: block;
        }
        
        .timeline-month {
            border-left: 3px solid #e2e8f0;
            padding-left: 12px;
            position: relative;
        }
        
        .timeline-month::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 8px;
            width: 9px;
            height: 9px;
            background: #3b82f6;
            border-radius: 50%;
        }
        
        .stage-item {
            padding: 12px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .stage-item.active {
            background: #dbeafe;
            border: 1px solid #3b82f6;
        }
        
        .stage-item.completed {
            background: #dcfce7;
            border: 1px solid #10b981;
        }
        
        .stage-item.upcoming {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }
        
        .treatment-item {
            padding: 12px;
            background: white;
            border-radius: 8px;
            border: 1px solid #f1f5f9;
            margin-bottom: 8px;
        }
        
        .treatment-item.active {
            border-color: #f59e0b;
            background: #fffbeb;
        }
        
        .fertilizer-stage {
            margin-bottom: 12px;
        }
        
        .fertilizer-item {
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .fertilizer-item:last-child {
            border-bottom: none;
        }
        
        .checklist-item {
            display: flex;
            align-items: center;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border: 1px solid #f1f5f9;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .checklist-item input[type="checkbox"] {
            margin-right: 8px;
            width: 16px;
            height: 16px;
        }
        
        .checklist-item span {
            flex: 1;
            font-size: 14px;
            color: #374151;
        }
        
        .checklist-item.completed {
            background: #dcfce7;
            border-color: #10b981;
        }
        
        .checklist-item.completed span {
            text-decoration: line-through;
            color: #6b7280;
        }
        
        .checklist-item.critical {
            border-color: #ef4444;
            background: #fef2f2;
        }
        
        .checklist-item.warning {
            border-color: #f59e0b;
            background: #fffbeb;
        }
        
        /* Task filter styles */
        .task-filter-btn {
            flex-shrink: 0;
            background: white;
            border: 1px solid #e2e8f0;
            color: #6b7280;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .task-filter-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .task-item.hidden {
            display: none;
        }
        
        /* Enhanced task interaction */
        .task-item {
            transition: all 0.3s ease;
        }
        
        .task-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Update Status Button Style */
        .update-status-btn {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);
        }
        
        .update-status-btn:active {
            transform: scale(0.95);
            box-shadow: 0 1px 2px rgba(139, 92, 246, 0.3);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="mobile-container">
        <!-- Status Bar -->
        <div class="status-bar">
            <span>09:41</span>
            <span>üì∂ üì∂ üì∂ üíæ üîã</span>
        </div>
        
        <!-- App Header -->
        <div class="app-header">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-seedling text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold">V∆∞·ªùn Anh Hi·ªÅn</h1>
                        <p class="text-sm opacity-90">12.5ha ‚Ä¢ 156 c√¢y ‚Ä¢ C√∫ M'Gar, DL</p>
                    </div>
                </div>
                <div class="relative">
                    <i class="fas fa-bell text-xl"></i>
                    <div class="alert-badge">3</div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Home Tab -->
            <div id="home-tab" class="tab-content active">
                <!-- Weather & Market Info -->
                <div class="flex space-x-2 m-4">
                    <div class="flex-1 bg-blue-50 rounded-lg p-3 border border-blue-200">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-thermometer-half text-blue-600"></i>
                            <span class="text-sm font-medium text-blue-800">32¬∞C ‚Ä¢ 70%</span>
                        </div>
                    </div>
                    <div class="flex-1 bg-yellow-50 rounded-lg p-3 border border-yellow-200">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-chart-line text-yellow-600"></i>
                            <span class="text-sm font-medium text-yellow-800">62,000ƒë/kg</span>
                            <span class="text-xs text-green-600">+8%</span>
                        </div>
                    </div>
                </div>

                <!-- Critical Alerts -->
                <div class="card">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-red-800 flex items-center">
                            <i class="fas fa-exclamation-triangle text-red-600 mr-2"></i>
                            C·∫£nh b√°o kh·∫©n c·∫•p
                        </h3>
                        <span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs">3</span>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                            <div class="flex items-center space-x-2 mb-2">
                                <i class="fas fa-bug text-red-600"></i>
                                <span class="font-bold text-red-800 text-sm">S√¢u ph·ªß qu·∫£</span>
                                <span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs">Kh·∫©n c·∫•p</span>
                            </div>
                            <p class="text-xs text-red-700 mb-2">Khu A3, B1 ‚Ä¢ 35 c√¢y b·ªã ·∫£nh h∆∞·ªüng</p>
                            <button class="w-full bg-red-500 text-white py-2 rounded-lg text-xs font-medium" onclick="handleEmergency()">
                                üö® X·ª≠ l√Ω ngay
                            </button>
                        </div>
                        
                        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-cloud-rain text-yellow-600"></i>
                                    <span class="font-bold text-yellow-800 text-sm">M∆∞a l·ªõn 48h t·ªõi</span>
                                </div>
                                <button class="bg-yellow-500 text-white px-3 py-1 rounded text-xs">Chu·∫©n b·ªã</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map Section (Moved from More tab) -->
                <div class="card">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center">
                            <i class="fas fa-map text-blue-600 mr-2"></i>
                            B·∫£n ƒë·ªì ph√¢n khu
                        </h3>
                        <button class="update-status-btn" onclick="updateZoneStatus()">
                            <i class="fas fa-edit mr-1"></i>C·∫≠p nh·∫≠t t√¨nh tr·∫°ng
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">8 l√¥ canh t√°c ‚Ä¢ Nh·∫•n ƒë·ªÉ xem chi ti·∫øt</p>
                    
                    <div class="zone-grid">
                        <div class="zone-item zone-healthy" onclick="selectZone('A1')">
                            <div class="text-center">
                                <div class="font-bold">A1</div>
                                <div class="text-xs">20 c√¢y</div>
                            </div>
                        </div>
                        <div class="zone-item zone-healthy" onclick="selectZone('A2')">
                            <div class="text-center">
                                <div class="font-bold">A2</div>
                                <div class="text-xs">19 c√¢y</div>
                            </div>
                        </div>
                        <div class="zone-item zone-warning" onclick="selectZone('A3')">
                            <div class="text-center">
                                <div class="font-bold">A3</div>
                                <div class="text-xs">18 c√¢y</div>
                            </div>
                        </div>
                        <div class="zone-item zone-healthy" onclick="selectZone('A4')">
                            <div class="text-center">
                                <div class="font-bold">A4</div>
                                <div class="text-xs">21 c√¢y</div>
                            </div>
                        </div>
                        <div class="zone-item zone-warning" onclick="selectZone('B1')">
                            <div class="text-center">
                                <div class="font-bold">B1</div>
                                <div class="text-xs">17 c√¢y</div>
                            </div>
                        </div>
                        <div class="zone-item zone-healthy" onclick="selectZone('B2')">
                            <div class="text-center">
                                <div class="font-bold">B2</div>
                                <div class="text-xs">20 c√¢y</div>
                            </div>
                        </div>
                        <div class="zone-item zone-critical" onclick="selectZone('B3')">
                            <div class="text-center">
                                <div class="font-bold">B3</div>
                                <div class="text-xs">16 c√¢y</div>
                            </div>
                        </div>
                        <div class="zone-item zone-new" onclick="selectZone('B4')">
                            <div class="text-center">
                                <div class="font-bold">B4</div>
                                <div class="text-xs">19 c√¢y</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <div class="metric-card">
                            <div class="text-xl font-bold text-green-700">4</div>
                            <div class="text-xs text-gray-600">L√¥ kh·ªèe m·∫°nh</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-xl font-bold text-yellow-700">2</div>
                            <div class="text-xs text-gray-600">C·∫ßn theo d√µi</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-xl font-bold text-red-700">1</div>
                            <div class="text-xs text-gray-600">Kh·∫©n c·∫•p</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-xl font-bold text-blue-700">1</div>
                            <div class="text-xs text-gray-600">C√¢y non</div>
                        </div>
                    </div>

                    <!-- Status Update Hint -->
                    <div class="bg-purple-50 rounded-lg p-3 border border-purple-200 mt-3">
                        <div class="flex items-center space-x-2 mb-1">
                            <i class="fas fa-info-circle text-purple-600"></i>
                            <span class="font-medium text-purple-800 text-sm">C·∫≠p nh·∫≠t ƒë·ªãnh k·ª≥</span>
                        </div>
                        <p class="text-xs text-purple-700">B√°o c√°o thay ƒë·ªïi: c√¢y ch·∫øt, b·ªánh n·∫∑ng, s·ªë l∆∞·ª£ng qu·∫£, nƒÉng su·∫•t ∆∞·ªõc t√≠nh</p>
                    </div>
                </div>

                <!-- Production Overview -->
                <div class="card">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <i class="fas fa-chart-line text-green-600 mr-2"></i>
                        T·ªïng quan s·∫£n xu·∫•t
                    </h3>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="metric-card">
                            <div class="text-2xl font-bold text-green-700">156</div>
                            <div class="text-sm text-gray-600">T·ªïng s·ªë c√¢y</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-2xl font-bold text-orange-700">4,680</div>
                            <div class="text-sm text-gray-600">Qu·∫£ ƒëang ph√°t tri·ªÉn</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-2xl font-bold text-purple-700">92%</div>
                            <div class="text-sm text-gray-600">T·ª∑ l·ªá ƒë·∫≠u qu·∫£</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-2xl font-bold text-blue-700">160</div>
                            <div class="text-sm text-gray-600">T·∫•n d·ª± ki·∫øn</div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-3 border border-green-200">
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-700">T8-T9 2025</div>
                            <div class="text-sm text-gray-600">Th·ªùi gian thu ho·∫°ch d·ª± ki·∫øn</div>
                            <div class="text-lg font-bold text-blue-800 mt-1">9.92 t·ª∑ VNƒê</div>
                            <div class="text-xs text-green-600">+15% so v·ªõi nƒÉm tr∆∞·ªõc</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">H√†nh ƒë·ªông nhanh</h3>
                    <div class="grid grid-cols-4 gap-3">
                        <div class="quick-action" onclick="quickLog()">
                            <i class="fas fa-book text-green-600 text-xl mb-2"></i>
                            <div class="text-xs font-medium">Nh·∫≠t k√Ω</div>
                        </div>
                        <div class="quick-action" onclick="quickMaterial()">
                            <i class="fas fa-boxes text-orange-600 text-xl mb-2"></i>
                            <div class="text-xs font-medium">V·∫≠t t∆∞</div>
                        </div>
                        <div class="quick-action" onclick="quickPest()">
                            <i class="fas fa-bug text-red-600 text-xl mb-2"></i>
                            <div class="text-xs font-medium">S√¢u b·ªánh</div>
                        </div>
                        <div class="quick-action" onclick="quickWeather()">
                            <i class="fas fa-cloud-sun text-blue-600 text-xl mb-2"></i>
                            <div class="text-xs font-medium">Th·ªùi ti·∫øt</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Support Tab -->
            <div id="support-tab" class="tab-content">
                <div class="card">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center">
                            <i class="fas fa-user-tie text-green-600 mr-2"></i>
                            K·ªπ thu·∫≠t vi√™n chuy√™n tr√°ch
                        </h3>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-sm text-green-600 font-medium">ƒêang online</span>
                        </div>
                    </div>
                </div>

                <!-- Technician Profile -->
                <div class="card">
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 border border-green-200">
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center relative">
                                <i class="fas fa-user-tie text-green-600 text-xl"></i>
                                <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-white text-xs"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <h4 class="text-lg font-bold text-gray-800">KS. Ph·∫°m VƒÉn Minh</h4>
                                <p class="text-sm text-gray-600">K·ªπ s∆∞ N√¥ng nghi·ªáp</p>
                                <p class="text-sm text-green-600 font-medium">8 nƒÉm kinh nghi·ªám ‚Ä¢ Chuy√™n s·∫ßu ri√™ng</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="bg-white p-3 rounded-lg border border-gray-200 text-center">
                                <div class="text-lg font-bold text-green-700">156</div>
                                <div class="text-xs text-gray-600">V∆∞·ªùn ph·ª• tr√°ch</div>
                            </div>
                            <div class="bg-white p-3 rounded-lg border border-gray-200 text-center">
                                <div class="text-lg font-bold text-blue-700">4.8/5</div>
                                <div class="text-xs text-gray-600">ƒê√°nh gi√°</div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg p-3 border border-gray-200">
                            <h5 class="font-semibold text-gray-800 mb-2 text-sm">Chuy√™n m√¥n:</h5>
                            <div class="flex flex-wrap gap-1">
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">S·∫ßu ri√™ng</span>
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Ph√≤ng tr·ª´ s√¢u b·ªánh</span>
                                <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs">Dinh d∆∞·ª°ng c√¢y</span>
                                <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">VietGAP</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Contact -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3">üöÄ Li√™n h·ªá nhanh</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="bg-green-500 text-white py-3 rounded-lg font-medium active:bg-green-600" onclick="callTechnician()">
                            <i class="fas fa-phone text-lg mb-1"></i>
                            <div class="text-sm">G·ªçi ƒëi·ªán</div>
                        </button>
                        <button class="bg-blue-500 text-white py-3 rounded-lg font-medium active:bg-blue-600 relative" onclick="openChat()">
                            <i class="fas fa-comments text-lg mb-1"></i>
                            <div class="text-sm">Chat</div>
                            <div class="alert-badge">2</div>
                        </button>
                        <button class="bg-purple-500 text-white py-3 rounded-lg font-medium active:bg-purple-600" onclick="videoCall()">
                            <i class="fas fa-video text-lg mb-1"></i>
                            <div class="text-sm">Video call</div>
                        </button>
                        <button class="bg-orange-500 text-white py-3 rounded-lg font-medium active:bg-orange-600" onclick="sendPhoto()">
                            <i class="fas fa-camera text-lg mb-1"></i>
                            <div class="text-sm">G·ª≠i ·∫£nh</div>
                        </button>
                    </div>
                </div>

                <!-- Active Consultations -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3">üí¨ Cu·ªôc h·ªôi tho·∫°i g·∫ßn ƒë√¢y</h4>
                    <div class="space-y-3">
                        <div class="bg-blue-50 p-3 rounded-lg border border-blue-200">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-medium text-blue-800 text-sm">S√¢u ph·ªß qu·∫£ khu A3</span>
                                <span class="text-xs text-gray-500">2 gi·ªù tr∆∞·ªõc</span>
                            </div>
                            <p class="text-sm text-blue-700 mb-2">"S·ª≠ d·ª•ng Imidacloprid 200SC, 1.5ml/L n∆∞·ªõc. Phun bu·ªïi chi·ªÅu, tr√°nh n·∫Øng g·∫Øt..."</p>
                            <div class="flex items-center space-x-2">
                                <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs" onclick="continueChat('pest-a3')">
                                    Ti·∫øp t·ª•c chat
                                </button>
                                <button class="bg-green-500 text-white px-3 py-1 rounded text-xs" onclick="markAsCompleted('pest-a3')">
                                    ƒê√£ xong
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-medium text-yellow-800 text-sm">Li·ªÅu l∆∞·ª£ng ph√¢n NPK</span>
                                <span class="text-xs text-gray-500">1 ng√†y tr∆∞·ªõc</span>
                            </div>
                            <p class="text-sm text-yellow-700 mb-2">"Giai ƒëo·∫°n ra qu·∫£ c·∫ßn 2kg NPK/c√¢y/th√°ng. B√≥n 2 l·∫ßn, c√°ch g·ªëc 1.5m..."</p>
                            <div class="flex items-center space-x-2">
                                <button class="bg-yellow-500 text-white px-3 py-1 rounded text-xs" onclick="continueChat('npk-dosage')">
                                    Ti·∫øp t·ª•c chat
                                </button>
                                <button class="bg-green-500 text-white px-3 py-1 rounded text-xs" onclick="markAsCompleted('npk-dosage')">
                                    ƒê√£ √°p d·ª•ng
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Schedule & Visit -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3">üìÖ L·ªãch thƒÉm v∆∞·ªùn</h4>
                    <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <h5 class="font-bold text-purple-800">ThƒÉm v∆∞·ªùn ƒë·ªãnh k·ª≥</h5>
                                <p class="text-sm text-purple-700">Th·ª© 6, 13/12/2024</p>
                                <p class="text-sm text-gray-600">8:00 AM - 11:00 AM</p>
                            </div>
                            <div class="text-center">
                                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-calendar-check text-purple-600"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-2">
                            <h6 class="font-medium text-purple-800 text-sm">K·∫ø ho·∫°ch ki·ªÉm tra:</h6>
                            <ul class="text-sm text-purple-700 space-y-1">
                                <li>‚Ä¢ ƒê√°nh gi√° t√¨nh h√¨nh s√¢u ph·ªß qu·∫£</li>
                                <li>‚Ä¢ Ki·ªÉm tra hi·ªáu qu·∫£ phun thu·ªëc</li>
                                <li>‚Ä¢ H∆∞·ªõng d·∫´n b√≥n ph√¢n giai ƒëo·∫°n m·ªõi</li>
                                <li>‚Ä¢ Chu·∫©n b·ªã cho m√πa m∆∞a</li>
                            </ul>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-2 mt-3">
                            <button class="bg-purple-500 text-white py-2 rounded text-sm" onclick="rescheduleVisit()">
                                <i class="fas fa-edit mr-1"></i>ƒê·ªïi l·ªãch
                            </button>
                            <button class="bg-green-500 text-white py-2 rounded text-sm" onclick="confirmVisit()">
                                <i class="fas fa-check mr-1"></i>X√°c nh·∫≠n
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quick Help -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3">üÜò H·ªó tr·ª£ kh·∫©n c·∫•p</h4>
                    <div class="space-y-2">
                        <button class="w-full bg-red-500 text-white py-3 rounded-lg font-medium text-left px-4 active:bg-red-600" onclick="emergencyCall()">
                            <i class="fas fa-phone-volume mr-3"></i>
                            G·ªçi kh·∫©n c·∫•p (24/7)
                        </button>
                        <button class="w-full bg-orange-500 text-white py-3 rounded-lg font-medium text-left px-4 active:bg-orange-600" onclick="reportProblem()">
                            <i class="fas fa-exclamation-triangle mr-3"></i>
                            B√°o c√°o s·ª± c·ªë
                        </button>
                        <button class="w-full bg-blue-500 text-white py-3 rounded-lg font-medium text-left px-4 active:bg-blue-600" onclick="requestVisit()">
                            <i class="fas fa-calendar-plus mr-3"></i>
                            Y√™u c·∫ßu thƒÉm v∆∞·ªùn
                        </button>
                    </div>
                </div>

                <!-- Knowledge Base -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3">üìö T√†i li·ªáu tham kh·∫£o</h4>
                    <div class="space-y-2">
                        <button class="w-full bg-green-50 border border-green-200 py-2 rounded-lg text-left px-3 active:bg-green-100" onclick="viewGuide('pest-control')">
                            <i class="fas fa-bug text-green-600 mr-2"></i>
                            <span class="text-sm font-medium">H∆∞·ªõng d·∫´n ph√≤ng tr·ª´ s√¢u b·ªánh</span>
                        </button>
                        <button class="w-full bg-blue-50 border border-blue-200 py-2 rounded-lg text-left px-3 active:bg-blue-100" onclick="viewGuide('fertilizer')">
                            <i class="fas fa-seedling text-blue-600 mr-2"></i>
                            <span class="text-sm font-medium">K·ªπ thu·∫≠t b√≥n ph√¢n</span>
                        </button>
                        <button class="w-full bg-purple-50 border border-purple-200 py-2 rounded-lg text-left px-3 active:bg-purple-100" onclick="viewGuide('harvest')">
                            <i class="fas fa-apple-alt text-purple-600 mr-2"></i>
                            <span class="text-sm font-medium">H∆∞·ªõng d·∫´n thu ho·∫°ch</span>
                        </button>
                        <button class="w-full bg-orange-50 border border-orange-200 py-2 rounded-lg text-left px-3 active:bg-orange-100" onclick="viewGuide('vietgap')">
                            <i class="fas fa-certificate text-orange-600 mr-2"></i>
                            <span class="text-sm font-medium">Ti√™u chu·∫©n VietGAP</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tasks Tab -->
            <div id="tasks-tab" class="tab-content">
                <div class="card">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center">
                            <i class="fas fa-tasks text-blue-600 mr-2"></i>
                            C√¥ng vi·ªác & Nhi·ªám v·ª•
                        </h3>
                        <div class="flex items-center space-x-2">
                            <span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs">2 kh·∫©n c·∫•p</span>
                            <button class="bg-green-500 text-white px-3 py-1 rounded-lg text-xs" onclick="addNewTask()">
                                <i class="fas fa-plus mr-1"></i>Th√™m
                            </button>
                        </div>
                    </div>
                    
                    <!-- Task Filter -->
                    <div class="flex overflow-x-auto space-x-2 mb-4 pb-2">
                        <button id="allTasksBtn" class="task-filter-btn active" onclick="filterTasks('all')">
                            T·∫•t c·∫£
                        </button>
                        <button id="urgentTasksBtn" class="task-filter-btn" onclick="filterTasks('urgent')">
                            Kh·∫©n c·∫•p
                        </button>
                        <button id="todayTasksBtn" class="task-filter-btn" onclick="filterTasks('today')">
                            H√¥m nay
                        </button>
                        <button id="inprogressTasksBtn" class="task-filter-btn" onclick="filterTasks('inprogress')">
                            ƒêang l√†m
                        </button>
                        <button id="completedTasksBtn" class="task-filter-btn" onclick="filterTasks('completed')">
                            Ho√†n th√†nh
                        </button>
                    </div>
                </div>

                <div class="px-4 space-y-3">
                    <!-- Critical Emergency Task -->
                    <div class="task-item task-urgent urgent today">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-spray-can text-red-600"></i>
                                    <span class="font-bold text-red-800 text-sm">Phun thu·ªëc s√¢u ph·ªß qu·∫£</span>
                                </div>
                                <span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs">Kh·∫©n c·∫•p</span>
                            </div>
                            <p class="text-xs text-red-700 mb-2">Khu A3, B1 ‚Ä¢ 35 c√¢y b·ªã ·∫£nh h∆∞·ªüng ‚Ä¢ Trong 24h</p>
                            <div class="bg-red-50 p-2 rounded-lg mb-2">
                                <p class="text-xs text-red-700 font-medium">H∆∞·ªõng d·∫´n t·ª´ KTV:</p>
                                <p class="text-xs text-red-600">"Imidacloprid 200SC, 1.5ml/L, phun bu·ªïi chi·ªÅu"</p>
                            </div>
                            <div class="flex space-x-2">
                                <button class="bg-red-500 text-white px-3 py-1 rounded text-xs font-medium" onclick="startTask('pest-control')">
                                    üöÄ B·∫Øt ƒë·∫ßu
                                </button>
                                <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs" onclick="askTechnicianHelp('pest-control')">
                                    üí¨ H·ªèi KTV
                                </button>
                                <button class="bg-green-500 text-white px-3 py-1 rounded text-xs" onclick="reportWithPhoto('pest-control')">
                                    üì∏ B√°o c√°o
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- In Progress Task -->
                    <div class="task-item task-high inprogress today">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-seedling text-yellow-600"></i>
                                    <span class="font-bold text-yellow-800 text-sm">B√≥n ph√¢n NPK ƒë·ªãnh k·ª≥</span>
                                </div>
                                <span class="bg-yellow-500 text-white px-2 py-1 rounded-full text-xs">ƒêang l√†m</span>
                            </div>
                            <p class="text-xs text-yellow-700 mb-2">To√†n v∆∞·ªùn ‚Ä¢ 2kg/c√¢y + K2O 3kg/c√¢y</p>
                            <div class="flex items-center justify-between text-xs mb-2">
                                <span class="text-gray-600">Ti·∫øn ƒë·ªô: 45/156 c√¢y</span>
                                <span class="text-yellow-600 font-semibold">29%</span>
                            </div>
                            <div class="w-full bg-yellow-100 rounded-full h-2 mb-2">
                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 29%"></div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="bg-yellow-500 text-white px-3 py-1 rounded text-xs font-medium" onclick="continueTask('fertilizer')">
                                    ‚èØÔ∏è Ti·∫øp t·ª•c
                                </button>
                                <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs" onclick="updateProgress('fertilizer')">
                                    üìä C·∫≠p nh·∫≠t
                                </button>
                                <button class="bg-green-500 text-white px-3 py-1 rounded text-xs" onclick="reportWithPhoto('fertilizer')">
                                    üì∏ B√°o c√°o
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Completed Task -->
                    <div class="task-item task-completed completed">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-check-circle text-green-600"></i>
                                    <span class="font-bold text-green-800 text-sm">Chu·∫©n b·ªã m√πa m∆∞a</span>
                                </div>
                                <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs">Ho√†n th√†nh</span>
                            </div>
                            <p class="text-xs text-green-700 mb-2">Ki·ªÉm tra tho√°t n∆∞·ªõc, c·∫Øt c·ªè d·∫°i</p>
                            <div class="bg-green-50 p-2 rounded-lg mb-2">
                                <p class="text-xs text-green-700">‚úÖ Ho√†n th√†nh 100% ‚Ä¢ 2 gi·ªù tr∆∞·ªõc</p>
                            </div>
                            <div class="flex space-x-2">
                                <button class="bg-green-500 text-white px-3 py-1 rounded text-xs" onclick="viewTaskReport('rain-prep')">
                                    üìã Xem b√°o c√°o
                                </button>
                                <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs" onclick="shareWithTechnician('rain-prep')">
                                    üí¨ Chia s·∫ª KTV
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Upcoming Tasks -->
                    <div class="task-item task-medium upcoming">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-eye text-blue-600"></i>
                                    <span class="font-bold text-blue-800 text-sm">Ki·ªÉm tra qu·∫£ non</span>
                                </div>
                                <span class="bg-blue-500 text-white px-2 py-1 rounded-full text-xs">S·∫Øp t·ªõi</span>
                            </div>
                            <p class="text-xs text-blue-700 mb-2">H√†ng tu·∫ßn ‚Ä¢ Lo·∫°i b·ªè qu·∫£ d·ªã t·∫≠t</p>
                            <p class="text-xs text-gray-600 mb-2">üïê L√™n l·ªãch: Th·ª© 2, 16/12 ‚Ä¢ 7:00 AM</p>
                            <div class="flex space-x-2">
                                <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs font-medium" onclick="startEarlyTask('fruit-check')">
                                    üöÄ L√†m s·ªõm
                                </button>
                                <button class="bg-gray-500 text-white px-3 py-1 rounded text-xs" onclick="rescheduleTask('fruit-check')">
                                    üìÖ ƒê·ªïi l·ªãch
                                </button>
                                <button class="bg-green-500 text-white px-3 py-1 rounded text-xs" onclick="getTechnicianAdvice('fruit-check')">
                                    üí° T∆∞ v·∫•n
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Weather-related urgent task -->
                    <div class="task-item task-urgent urgent today">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-cloud-rain text-red-600"></i>
                                    <span class="font-bold text-red-800 text-sm">Chu·∫©n b·ªã m∆∞a l·ªõn</span>
                                </div>
                                <span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs">48h</span>
                            </div>
                            <p class="text-xs text-red-700 mb-2">D·ª± b√°o m∆∞a 40-60mm ‚Ä¢ Nguy c∆° ng·∫≠p √∫ng</p>
                            <div class="bg-yellow-50 p-2 rounded-lg mb-2">
                                <p class="text-xs text-orange-700 font-medium">C·∫ßn l√†m:</p>
                                <p class="text-xs text-orange-600">D·ªçn c·ªëng tho√°t n∆∞·ªõc, di chuy·ªÉn v·∫≠t t∆∞</p>
                            </div>
                            <div class="flex space-x-2">
                                <button class="bg-red-500 text-white px-3 py-1 rounded text-xs font-medium" onclick="startTask('rain-prep')">
                                    üöÄ B·∫Øt ƒë·∫ßu
                                </button>
                                <button class="bg-blue-500 text-white px-3 py-1 rounded text-xs" onclick="getWeatherAdvice()">
                                    üåßÔ∏è T∆∞ v·∫•n
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Process Tab -->
            <div id="process-tab" class="tab-content">
                <div class="card">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center">
                            <i class="fas fa-clipboard-list text-purple-600 mr-2"></i>
                            Quy tr√¨nh Canh t√°c
                        </h3>
                        <div class="flex items-center space-x-1">
                            <select id="processYearSelect" class="text-xs border rounded px-2 py-1" onchange="updateProcessYear()">
                                <option value="2024">2024</option>
                                <option value="2025" selected>2025</option>
                                <option value="2026">2026</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Process Navigation -->
                    <div class="flex overflow-x-auto space-x-2 mb-4 pb-2">
                        <button id="timelineBtn" class="process-nav-btn active" onclick="showProcessSection('timeline')">
                            <i class="fas fa-calendar-alt mr-1"></i>L·ªãch nƒÉm
                        </button>
                        <button id="stagesBtn" class="process-nav-btn" onclick="showProcessSection('stages')">
                            <i class="fas fa-seedling mr-1"></i>Giai ƒëo·∫°n
                        </button>
                        <button id="treatmentBtn" class="process-nav-btn" onclick="showProcessSection('treatment')">
                            <i class="fas fa-spray-can mr-1"></i>Ph√≤ng tr·ª´
                        </button>
                        <button id="fertilizeBtn" class="process-nav-btn" onclick="showProcessSection('fertilize')">
                            <i class="fas fa-leaf mr-1"></i>B√≥n ph√¢n
                        </button>
                        <button id="checklistBtn" class="process-nav-btn" onclick="showProcessSection('checklist')">
                            <i class="fas fa-check-square mr-1"></i>Checklist
                        </button>
                    </div>
                </div>

                <!-- Timeline Section -->
                <div id="timeline-section" class="process-section active">
                    <div class="card">
                        <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-calendar-year text-blue-600 mr-2"></i>
                            L·ªãch canh t√°c nƒÉm 2025
                        </h4>
                        
                        <div class="space-y-3">
                            <!-- January -->
                            <div class="timeline-month">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-bold text-blue-800">Th√°ng 1 - Ra hoa</h5>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Quan tr·ªçng</span>
                                </div>
                                <div class="bg-blue-50 rounded-lg p-3 border border-blue-200">
                                    <ul class="text-sm space-y-1">
                                        <li class="flex items-center">
                                            <i class="fas fa-flower text-pink-600 mr-2 text-xs"></i>
                                            <span>Theo d√µi ra hoa, ƒë√°nh d·∫•u th·ªùi gian</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-cut text-orange-600 mr-2 text-xs"></i>
                                            <span>T·ªâa c√†nh, l√†m s·∫°ch t√°n l√°</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-seedling text-green-600 mr-2 text-xs"></i>
                                            <span>B√≥n ph√¢n l√¢n, kali k√≠ch th√≠ch ra hoa</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-tint text-blue-600 mr-2 text-xs"></i>
                                            <span>Ki·ªÉm tra h·ªá th·ªëng t∆∞·ªõi</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- February -->
                            <div class="timeline-month">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-bold text-pink-800">Th√°ng 2 - N·ªü hoa</h5>
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded-full text-xs">Cao</span>
                                </div>
                                <div class="bg-pink-50 rounded-lg p-3 border border-pink-200">
                                    <ul class="text-sm space-y-1">
                                        <li class="flex items-center">
                                            <i class="fas fa-eye text-purple-600 mr-2 text-xs"></i>
                                            <span>Theo d√µi n·ªü hoa, th·ª• ph·∫•n t·ª± nhi√™n</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-bug text-red-600 mr-2 text-xs"></i>
                                            <span>Ph√≤ng tr·ª´ thrips g√¢y h·∫°i hoa</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-hand-paper text-yellow-600 mr-2 text-xs"></i>
                                            <span>Th·ª• ph·∫•n nh√¢n t·∫°o (n·∫øu c·∫ßn)</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-leaf text-green-600 mr-2 text-xs"></i>
                                            <span>Phun acid gibberellic k√≠ch th√≠ch ƒë·∫≠u qu·∫£</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- March -->
                            <div class="timeline-month">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-bold text-green-800">Th√°ng 3 - ƒê·∫≠u qu·∫£</h5>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Hi·ªán t·∫°i</span>
                                </div>
                                <div class="bg-green-50 rounded-lg p-3 border border-green-200">
                                    <ul class="text-sm space-y-1">
                                        <li class="flex items-center">
                                            <i class="fas fa-apple-alt text-green-600 mr-2 text-xs"></i>
                                            <span>ƒê·∫øm qu·∫£ non, ∆∞·ªõc t√≠nh s·∫£n l∆∞·ª£ng</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-hand-scissors text-orange-600 mr-2 text-xs"></i>
                                            <span>T·ªâa qu·∫£ d·ªã t·∫≠t, qu·∫£ y·∫øu</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-seedling text-blue-600 mr-2 text-xs"></i>
                                            <span>B√≥n ph√¢n NPK 16-16-8 cho qu·∫£ non</span>
                                        </li>
                                        <li class="flex items-center">
                                            <i class="fas fa-shield-alt text-purple-600 mr-2 text-xs"></i>
                                            <span>Bao qu·∫£ ƒë·ªÉ b·∫£o v·ªá</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- More months... -->
                            <div class="text-center">
                                <button class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm" onclick="showAllMonths()">
                                    <i class="fas fa-chevron-down mr-2"></i>Xem t·∫•t c·∫£ 12 th√°ng
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Growth Stages Section -->
                <div id="stages-section" class="process-section hidden">
                    <div class="card">
                        <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-seedling text-green-600 mr-2"></i>
                            Giai ƒëo·∫°n ph√°t tri·ªÉn
                        </h4>
                        
                        <div class="space-y-4">
                            <!-- Current Stage -->
                            <div class="bg-green-50 rounded-lg p-4 border-2 border-green-300">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 class="font-bold text-green-800">Giai ƒëo·∫°n hi·ªán t·∫°i: Ra qu·∫£</h5>
                                    <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs">75% ho√†n th√†nh</span>
                                </div>
                                <p class="text-sm text-green-700 mb-3">Th·ªùi gian: Th√°ng 3-7/2025 ‚Ä¢ Qu·∫£ ƒëang ph√°t tri·ªÉn t·ª´ nh·ªè ƒë·∫øn l·ªõn</p>
                                <div class="w-full bg-green-100 rounded-full h-3 mb-3">
                                    <div class="bg-green-500 h-3 rounded-full" style="width: 75%"></div>
                                </div>
                                <div class="space-y-2">
                                    <h6 class="font-semibold text-green-800 text-sm">C√¥ng vi·ªác ch√≠nh:</h6>
                                    <ul class="text-sm text-green-700 space-y-1">
                                        <li>‚Ä¢ Theo d√µi s·ª± ph√°t tri·ªÉn c·ªßa qu·∫£</li>
                                        <li>‚Ä¢ B√≥n ph√¢n NPK ƒë·ªãnh k·ª≥</li>
                                        <li>‚Ä¢ Ph√≤ng tr·ª´ s√¢u ph·ªß qu·∫£</li>
                                        <li>‚Ä¢ T∆∞·ªõi n∆∞·ªõc ƒë·ªÅu ƒë·∫∑n</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- All Growth Stages -->
                            <div class="space-y-3">
                                <div class="stage-item completed">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                            <i class="fas fa-check text-white text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h6 class="font-semibold text-gray-800">1. Ra hoa (T1-T2)</h6>
                                            <p class="text-sm text-gray-600">Theo d√µi ra hoa, th·ª• ph·∫•n</p>
                                        </div>
                                        <span class="text-xs text-green-600 font-medium">Ho√†n th√†nh</span>
                                    </div>
                                </div>

                                <div class="stage-item active">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                            <i class="fas fa-play text-white text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h6 class="font-semibold text-gray-800">2. Ra qu·∫£ (T3-T7)</h6>
                                            <p class="text-sm text-gray-600">Qu·∫£ ph√°t tri·ªÉn, c·∫ßn chƒÉm s√≥c ƒë·∫∑c bi·ªát</p>
                                        </div>
                                        <span class="text-xs text-blue-600 font-medium">ƒêang th·ª±c hi·ªán</span>
                                    </div>
                                </div>

                                <div class="stage-item upcoming">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                            <i class="fas fa-clock text-white text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h6 class="font-semibold text-gray-800">3. Thu ho·∫°ch (T8-T9)</h6>
                                            <p class="text-sm text-gray-600">Thu h√°i qu·∫£ ch√≠n, b√°n ra th·ªã tr∆∞·ªùng</p>
                                        </div>
                                        <span class="text-xs text-gray-600 font-medium">S·∫Øp t·ªõi</span>
                                    </div>
                                </div>

                                <div class="stage-item upcoming">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                            <i class="fas fa-clock text-white text-sm"></i>
                                        </div>
                                        <div class="flex-1">
                                            <h6 class="font-semibold text-gray-800">4. Ngh·ªâ ng∆°i (T10-T12)</h6>
                                            <p class="text-sm text-gray-600">C√¢y ngh·ªâ ng∆°i, chu·∫©n b·ªã chu k·ª≥ m·ªõi</p>
                                        </div>
                                        <span class="text-xs text-gray-600 font-medium">Ch∆∞a t·ªõi</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Treatment Schedule Section -->
                <div id="treatment-section" class="process-section hidden">
                    <div class="card">
                        <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-spray-can text-red-600 mr-2"></i>
                            L·ªãch ph√≤ng tr·ª´ s√¢u b·ªánh
                        </h4>
                        
                        <div class="space-y-3">
                            <!-- Current Treatment Alert -->
                            <div class="bg-red-50 rounded-lg p-3 border border-red-200">
                                <div class="flex items-center space-x-2 mb-2">
                                    <i class="fas fa-exclamation-triangle text-red-600"></i>
                                    <span class="font-bold text-red-800">C·∫£nh b√°o hi·ªán t·∫°i</span>
                                </div>
                                <p class="text-sm text-red-700 mb-2">S√¢u ph·ªß qu·∫£ xu·∫•t hi·ªán ·ªü khu A3, B1</p>
                                <button class="bg-red-500 text-white px-3 py-1 rounded text-xs" onclick="viewTreatmentGuide('fruit-borer')">
                                    <i class="fas fa-book mr-1"></i>Xem h∆∞·ªõng d·∫´n x·ª≠ l√Ω
                                </button>
                            </div>

                            <!-- Regular Treatment Schedule -->
                            <h5 class="font-semibold text-gray-800">L·ªãch phun thu·ªëc ƒë·ªãnh k·ª≥</h5>
                            
                            <div class="treatment-schedule">
                                <div class="treatment-item active">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                            <div>
                                                <p class="font-medium text-sm">Tu·∫ßn 1 - Ph√≤ng thrips</p>
                                                <p class="text-xs text-gray-600">Imidacloprid 200SC ‚Ä¢ 1.5ml/L</p>
                                            </div>
                                        </div>
                                        <span class="text-xs text-orange-600">H√†ng th√°ng</span>
                                    </div>
                                </div>

                                <div class="treatment-item">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                            <div>
                                                <p class="font-medium text-sm">Tu·∫ßn 3 - Ph√≤ng n·∫•m</p>
                                                <p class="text-xs text-gray-600">Copper Oxychloride ‚Ä¢ 2g/L</p>
                                            </div>
                                        </div>
                                        <span class="text-xs text-blue-600">2 tu·∫ßn/l·∫ßn</span>
                                    </div>
                                </div>

                                <div class="treatment-item">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                            <div>
                                                <p class="font-medium text-sm">Th√°ng cu·ªëi - Vi sinh v·∫≠t</p>
                                                <p class="text-xs text-gray-600">Trichoderma ‚Ä¢ 5g/L</p>
                                            </div>
                                        </div>
                                        <span class="text-xs text-green-600">H√†ng th√°ng</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Common Pests Guide -->
                            <div class="bg-yellow-50 rounded-lg p-3 border border-yellow-200">
                                <h6 class="font-semibold text-yellow-800 mb-2">S√¢u b·ªánh th∆∞·ªùng g·∫∑p</h6>
                                <div class="grid grid-cols-1 gap-2">
                                    <button class="text-left bg-white p-2 rounded border text-sm" onclick="viewPestInfo('fruit-borer')">
                                        <span class="font-medium">üêõ S√¢u ph·ªß qu·∫£</span>
                                        <span class="text-gray-600 block text-xs">M√πa m∆∞a, g√¢y th·ªëi qu·∫£</span>
                                    </button>
                                    <button class="text-left bg-white p-2 rounded border text-sm" onclick="viewPestInfo('thrips')">
                                        <span class="font-medium">ü¶ó Thrips</span>
                                        <span class="text-gray-600 block text-xs">H·∫°i hoa, l√° non</span>
                                    </button>
                                    <button class="text-left bg-white p-2 rounded border text-sm" onclick="viewPestInfo('anthracnose')">
                                        <span class="font-medium">üçÑ N·∫•m th√°n th∆∞</span>
                                        <span class="text-gray-600 block text-xs">Tr√™n l√° v√† qu·∫£</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fertilizer Schedule Section -->
                <div id="fertilize-section" class="process-section hidden">
                    <div class="card">
                        <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-leaf text-green-600 mr-2"></i>
                            L·ªãch b√≥n ph√¢n
                        </h4>
                        
                        <div class="space-y-4">
                            <!-- Current Fertilizer Status -->
                            <div class="bg-green-50 rounded-lg p-3 border border-green-200">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-bold text-green-800">ƒêang b√≥n ph√¢n NPK</span>
                                    <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs">29% ho√†n th√†nh</span>
                                </div>
                                <p class="text-sm text-green-700">45/156 c√¢y ƒë√£ ƒë∆∞·ª£c b√≥n ‚Ä¢ 2kg/c√¢y + K2O 3kg/c√¢y</p>
                                <div class="w-full bg-green-100 rounded-full h-2 mt-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 29%"></div>
                                </div>
                            </div>

                            <!-- Fertilizer Schedule by Growth Stage -->
                            <h5 class="font-semibold text-gray-800">L·ªãch b√≥n ph√¢n theo giai ƒëo·∫°n</h5>
                            
                            <div class="space-y-3">
                                <!-- Current stage -->
                                <div class="fertilizer-stage active">
                                    <div class="bg-blue-50 rounded-lg p-3 border-l-4 border-blue-500">
                                        <div class="flex items-center justify-between mb-2">
                                            <h6 class="font-bold text-blue-800">Giai ƒëo·∫°n ra qu·∫£ (T3-T7)</h6>
                                            <span class="bg-blue-500 text-white px-2 py-1 rounded-full text-xs">Hi·ªán t·∫°i</span>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="fertilizer-item">
                                                <div class="flex items-center justify-between">
                                                    <span class="text-sm font-medium">NPK 16-16-8</span>
                                                    <span class="text-sm text-blue-700">2kg/c√¢y/th√°ng</span>
                                                </div>
                                                <p class="text-xs text-gray-600">B√≥n 2 l·∫ßn/th√°ng, c√°ch g·ªëc 1.5m</p>
                                            </div>
                                            <div class="fertilizer-item">
                                                <div class="flex items-center justify-between">
                                                    <span class="text-sm font-medium">Potassium Sulfate</span>
                                                    <span class="text-sm text-blue-700">3kg/c√¢y/th√°ng</span>
                                                </div>
                                                <p class="text-xs text-gray-600">Kali gi√∫p qu·∫£ to, ng·ªçt</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Upcoming stages -->
                                <div class="fertilizer-stage">
                                    <div class="bg-gray-50 rounded-lg p-3 border-l-4 border-gray-300">
                                        <div class="flex items-center justify-between mb-2">
                                            <h6 class="font-bold text-gray-800">Giai ƒëo·∫°n thu ho·∫°ch (T8-T9)</h6>
                                            <span class="bg-gray-500 text-white px-2 py-1 rounded-full text-xs">S·∫Øp t·ªõi</span>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="fertilizer-item">
                                                <div class="flex items-center justify-between">
                                                    <span class="text-sm font-medium">Ph√¢n h·ªØu c∆°</span>
                                                    <span class="text-sm text-gray-700">5kg/c√¢y</span>
                                                </div>
                                                <p class="text-xs text-gray-600">Cung c·∫•p dinh d∆∞·ª°ng l√¢u d√†i</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="fertilizer-stage">
                                    <div class="bg-gray-50 rounded-lg p-3 border-l-4 border-gray-300">
                                        <div class="flex items-center justify-between mb-2">
                                            <h6 class="font-bold text-gray-800">Giai ƒëo·∫°n ngh·ªâ ng∆°i (T10-T12)</h6>
                                            <span class="bg-gray-500 text-white px-2 py-1 rounded-full text-xs">Ch∆∞a t·ªõi</span>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="fertilizer-item">
                                                <div class="flex items-center justify-between">
                                                    <span class="text-sm font-medium">Ph√¢n l√¢n</span>
                                                    <span class="text-sm text-gray-700">1kg/c√¢y</span>
                                                </div>
                                                <p class="text-xs text-gray-600">Chu·∫©n b·ªã cho chu k·ª≥ m·ªõi</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Fertilizer Calculator -->
                            <div class="bg-purple-50 rounded-lg p-3 border border-purple-200">
                                <h6 class="font-semibold text-purple-800 mb-2">üßÆ T√≠nh to√°n ph√¢n b√≥n</h6>
                                <p class="text-sm text-purple-700 mb-2">Cho 156 c√¢y ‚Ä¢ Giai ƒëo·∫°n hi·ªán t·∫°i</p>
                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div class="bg-white p-2 rounded">
                                        <span class="text-gray-600">NPK c·∫ßn mua:</span>
                                        <span class="font-bold text-purple-700 block">312 kg/th√°ng</span>
                                    </div>
                                    <div class="bg-white p-2 rounded">
                                        <span class="text-gray-600">Kali c·∫ßn mua:</span>
                                        <span class="font-bold text-purple-700 block">468 kg/th√°ng</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Checklist Section -->
                <div id="checklist-section" class="process-section hidden">
                    <div class="card">
                        <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                            <i class="fas fa-check-square text-purple-600 mr-2"></i>
                            Checklist chu·∫©n b·ªã
                        </h4>
                        
                        <div class="space-y-4">
                            <!-- Season Preparation -->
                            <div class="checklist-season">
                                <h5 class="font-semibold text-gray-800 mb-3">üåßÔ∏è Chu·∫©n b·ªã m√πa m∆∞a (T5-T10)</h5>
                                <div class="space-y-2">
                                    <label class="checklist-item completed">
                                        <input type="checkbox" checked disabled>
                                        <span>Ki·ªÉm tra h·ªá th·ªëng tho√°t n∆∞·ªõc</span>
                                        <i class="fas fa-check text-green-600"></i>
                                    </label>
                                    <label class="checklist-item completed">
                                        <input type="checkbox" checked disabled>
                                        <span>C·∫Øt c·ªè d·∫°i, d·ªçn s·∫°ch v∆∞·ªùn</span>
                                        <i class="fas fa-check text-green-600"></i>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Chu·∫©n b·ªã thu·ªëc ph√≤ng n·∫•m</span>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Ki·ªÉm tra kho ch·ª©a v·∫≠t t∆∞</span>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>S·ª≠a ch·ªØa m√°y m√≥c n√¥ng nghi·ªáp</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Harvest Preparation -->
                            <div class="checklist-season">
                                <h5 class="font-semibold text-gray-800 mb-3">üçá Chu·∫©n b·ªã thu ho·∫°ch (T7-T8)</h5>
                                <div class="space-y-2">
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Li√™n h·ªá ƒë·∫°i l√Ω thu mua</span>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Chu·∫©n b·ªã d·ª•ng c·ª• thu h√°i</span>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Thu√™ nh√¢n c√¥ng thu ho·∫°ch</span>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Chu·∫©n b·ªã ph∆∞∆°ng ti·ªán v·∫≠n chuy·ªÉn</span>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Ki·ªÉm tra ch·∫•t l∆∞·ª£ng qu·∫£</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Materials Inventory -->
                            <div class="checklist-season">
                                <h5 class="font-semibold text-gray-800 mb-3">üì¶ Ki·ªÉm tra v·∫≠t t∆∞ ƒë·ªãnh k·ª≥</h5>
                                <div class="space-y-2">
                                    <label class="checklist-item critical">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>NPK 16-16-8 (H·∫øt h√†ng)</span>
                                        <i class="fas fa-exclamation-triangle text-red-600"></i>
                                    </label>
                                    <label class="checklist-item warning">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Imidacloprid 200SC (S·∫Øp h·∫øt)</span>
                                        <i class="fas fa-exclamation-circle text-yellow-600"></i>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>Trichoderma vi sinh</span>
                                    </label>
                                    <label class="checklist-item">
                                        <input type="checkbox" onchange="updateChecklist(this)">
                                        <span>D·ª•ng c·ª• b·∫£o h·ªô lao ƒë·ªông</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Progress Summary -->
                            <div class="bg-blue-50 rounded-lg p-3 border border-blue-200">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-bold text-blue-800">Ti·∫øn ƒë·ªô chu·∫©n b·ªã</span>
                                    <span class="text-sm text-blue-700" id="checklistProgress">2/12 ho√†n th√†nh</span>
                                </div>
                                <div class="w-full bg-blue-100 rounded-full h-2">
                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 17%" id="checklistProgressBar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- More Tab -->
            <div id="more-tab" class="tab-content">
                <!-- IoT Quick Status (Moved from Home tab) -->
                <div class="card">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center">
                            <i class="fas fa-wifi text-blue-600 mr-2"></i>
                            C·∫£m bi·∫øn IoT
                        </h3>
                        <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs">24/24 online</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-orange-50 rounded-lg p-3 border border-orange-200">
                            <div class="flex items-center justify-between mb-1">
                                <i class="fas fa-thermometer-half text-orange-600"></i>
                                <span class="status-dot status-good"></span>
                            </div>
                            <div class="sensor-value text-orange-700">32.5¬∞C</div>
                            <div class="text-xs text-gray-600">Nhi·ªát ƒë·ªô trung b√¨nh</div>
                        </div>
                        
                        <div class="bg-blue-50 rounded-lg p-3 border border-blue-200">
                            <div class="flex items-center justify-between mb-1">
                                <i class="fas fa-tint text-blue-600"></i>
                                <span class="status-dot status-good"></span>
                            </div>
                            <div class="sensor-value text-blue-700">72%</div>
                            <div class="text-xs text-gray-600">ƒê·ªô ·∫©m kh√¥ng kh√≠</div>
                        </div>
                        
                        <div class="bg-green-50 rounded-lg p-3 border border-green-200">
                            <div class="flex items-center justify-between mb-1">
                                <i class="fas fa-vial text-green-600"></i>
                                <span class="status-dot status-warning"></span>
                            </div>
                            <div class="sensor-value text-green-700">6.2</div>
                            <div class="text-xs text-gray-600">pH ƒë·∫•t trung b√¨nh</div>
                        </div>
                        
                        <div class="bg-purple-50 rounded-lg p-3 border border-purple-200">
                            <div class="flex items-center justify-between mb-1">
                                <i class="fas fa-seedling text-purple-600"></i>
                                <span class="status-dot status-good"></span>
                            </div>
                            <div class="sensor-value text-purple-700">78%</div>
                            <div class="text-xs text-gray-600">·∫®m ƒë·ªô ƒë·∫•t</div>
                        </div>
                    </div>
                </div>

                <!-- Materials & Finance Section -->
                <div class="card">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-bold text-gray-800 flex items-center">
                            <i class="fas fa-boxes text-orange-600 mr-2"></i>
                            V·∫≠t t∆∞ & T√†i ch√≠nh
                        </h3>
                        <button class="bg-orange-500 text-white px-3 py-1 rounded-lg text-xs" onclick="addMaterial()">
                            Th√™m
                        </button>
                    </div>
                </div>

                <!-- Material alerts -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3 text-sm">‚ö†Ô∏è C·∫£nh b√°o t·ªìn kho</h4>
                    <div class="space-y-2">
                        <div class="material-item">
                            <div class="flex items-center space-x-2">
                                <span class="status-dot status-critical"></span>
                                <div>
                                    <div class="font-medium text-sm">NPK 16-16-8</div>
                                    <div class="text-xs text-red-600">H·∫øt h√†ng</div>
                                </div>
                            </div>
                            <button class="bg-red-500 text-white px-3 py-1 rounded text-xs">ƒê·∫∑t h√†ng</button>
                        </div>
                        
                        <div class="material-item">
                            <div class="flex items-center space-x-2">
                                <span class="status-dot status-warning"></span>
                                <div>
                                    <div class="font-medium text-sm">Imidacloprid 200SC</div>
                                    <div class="text-xs text-yellow-600">2.5 l√≠t c√≤n l·∫°i</div>
                                </div>
                            </div>
                            <button class="bg-yellow-500 text-white px-3 py-1 rounded text-xs">K·∫ø ho·∫°ch</button>
                        </div>
                    </div>
                </div>

                <!-- Financial summary -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3 text-sm">üí∞ T√†i ch√≠nh th√°ng 12</h4>
                    <div class="grid grid-cols-3 gap-3 mb-3">
                        <div class="metric-card">
                            <div class="text-lg font-bold text-red-700">89.2tr</div>
                            <div class="text-xs text-gray-600">Chi ph√≠</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-lg font-bold text-blue-700">95.0tr</div>
                            <div class="text-xs text-gray-600">D·ª± to√°n</div>
                        </div>
                        <div class="metric-card">
                            <div class="text-lg font-bold text-green-700">5.8tr</div>
                            <div class="text-xs text-gray-600">Ti·∫øt ki·ªám</div>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">V·∫≠t t∆∞ (51%)</span>
                            <span class="font-bold text-orange-700">45.6tr</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Nh√¢n c√¥ng (32%)</span>
                            <span class="font-bold text-blue-700">28.5tr</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Thi·∫øt b·ªã (12%)</span>
                            <span class="font-bold text-purple-700">10.8tr</span>
                        </div>
                    </div>
                </div>

                <!-- Pending orders -->
                <div class="card">
                    <h4 class="font-bold text-gray-800 mb-3 text-sm">üì¶ ƒê∆°n ƒë·∫∑t h√†ng</h4>
                    <div class="space-y-2">
                        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                            <div class="flex justify-between items-center mb-1">
                                <span class="font-medium text-yellow-800 text-sm">#2024-156</span>
                                <span class="bg-yellow-500 text-white px-2 py-1 rounded-full text-xs">Ch·ªù duy·ªát</span>
                            </div>
                            <p class="text-sm text-gray-600">NPK 16-16-8 ‚Ä¢ 500 kg</p>
                            <p class="text-sm font-bold text-yellow-800">9.25 tri·ªáu</p>
                        </div>
                        
                        <div class="bg-blue-50 p-3 rounded-lg border border-blue-200">
                            <div class="flex justify-between items-center mb-1">
                                <span class="font-medium text-blue-800 text-sm">#2024-155</span>
                                <span class="bg-blue-500 text-white px-2 py-1 rounded-full text-xs">ƒêang giao</span>
                            </div>
                            <p class="text-sm text-gray-600">Imidacloprid + Trichoderma</p>
                            <p class="text-sm font-bold text-blue-800">2.8 tri·ªáu</p>
                        </div>
                    </div>
                </div>

                <!-- Technician Support -->
                <div class="card">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <i class="fas fa-user-tie text-green-600 mr-2"></i>
                        K·ªπ thu·∫≠t vi√™n
                    </h3>
                    
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-3 border border-green-200">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-user-tie text-green-600"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-bold text-gray-800">KS. Ph·∫°m VƒÉn Minh</span>
                                    <span class="status-dot status-good"></span>
                                    <span class="text-sm text-green-600">Online</span>
                                </div>
                                <p class="text-sm text-gray-600">8 nƒÉm kinh nghi·ªám ‚Ä¢ Chuy√™n s·∫ßu ri√™ng</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-2">
                            <button class="bg-green-500 text-white py-2 rounded text-sm" onclick="callTechnician()">
                                <i class="fas fa-phone mr-1"></i>G·ªçi
                            </button>
                            <button class="bg-blue-500 text-white py-2 rounded text-sm" onclick="chatTechnician()">
                                <i class="fas fa-comments mr-1"></i>Chat
                            </button>
                        </div>
                        
                        <div class="mt-3 bg-purple-50 rounded-lg p-2 border border-purple-200">
                            <p class="text-sm font-medium text-purple-800">ThƒÉm v∆∞·ªùn s·∫Øp t·ªõi:</p>
                            <p class="text-sm text-gray-600">Th·ª© 6, 13/12 ‚Ä¢ 8:00-11:00 AM</p>
                        </div>
                    </div>
                </div>

                <!-- Certifications -->
                <div class="card">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <i class="fas fa-certificate text-yellow-600 mr-2"></i>
                        Ch·ª©ng nh·∫≠n
                    </h3>
                    
                    <div class="space-y-3">
                        <div class="bg-green-50 p-3 rounded-lg border border-green-200">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="font-bold text-green-800">VietGAP</span>
                                    <span class="bg-green-500 text-white px-2 py-1 rounded-full text-xs ml-2">C√≥ hi·ªáu l·ª±c</span>
                                </div>
                                <span class="text-sm text-gray-600">ƒê·∫øn 03/2027</span>
                            </div>
                        </div>
                        
                        <div class="bg-blue-50 p-3 rounded-lg border border-blue-200">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="font-bold text-blue-800">GlobalGAP</span>
                                    <span class="bg-yellow-500 text-white px-2 py-1 rounded-full text-xs ml-2">ƒêang x·ª≠ l√Ω</span>
                                </div>
                                <span class="text-sm text-gray-600">65%</span>
                            </div>
                        </div>
                        
                        <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="font-bold text-red-800">H·ªØu c∆°</span>
                                    <span class="bg-red-500 text-white px-2 py-1 rounded-full text-xs ml-2">H·∫øt h·∫°n</span>
                                </div>
                                <button class="bg-purple-500 text-white px-3 py-1 rounded text-xs">Gia h·∫°n</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Market & Community -->
                <div class="card">
                    <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                        <i class="fas fa-globe text-blue-600 mr-2"></i>
                        Th·ªã tr∆∞·ªùng & C·ªông ƒë·ªìng
                    </h3>
                    
                    <div class="space-y-3">
                        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-bold text-yellow-800">Gi√° hi·ªán t·∫°i</span>
                                <span class="font-bold text-green-600">62,000ƒë/kg (+8%)</span>
                            </div>
                            <p class="text-sm text-gray-600">D·ª± b√°o 7 ng√†y: 58-65k</p>
                            <button class="w-full bg-yellow-500 text-white py-2 rounded-lg text-sm mt-2">
                                <i class="fas fa-handshake mr-2"></i>Xem c∆° h·ªôi b√°n
                            </button>
                        </div>
                        
                        <div class="bg-indigo-50 p-3 rounded-lg border border-indigo-200">
                            <span class="font-bold text-indigo-800">C·ªông ƒë·ªìng n√¥ng d√¢n</span>
                            <div class="mt-2 space-y-1 text-sm">
                                <p class="text-indigo-700">‚Ä¢ "C√°ch x·ª≠ l√Ω s√¢u ph·ªß qu·∫£ hi·ªáu qu·∫£"</p>
                                <p class="text-indigo-700">‚Ä¢ "D·ª± b√°o gi√° th√°ng 5-6"</p>
                            </div>
                            <button class="w-full bg-indigo-500 text-white py-2 rounded-lg text-sm mt-2">
                                <i class="fas fa-comments mr-2"></i>Tham gia th·∫£o lu·∫≠n
                            </button>
                        </div>
                    </div>
                </div>

                <!-- App Settings -->
                <div class="card">
                    <h3 class="text-lg font-bold text-gray-800 mb-3">C√†i ƒë·∫∑t ·ª©ng d·ª•ng</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center py-2">
                            <span class="text-sm text-gray-700">Th√¥ng b√°o push</span>
                            <div class="w-10 h-6 bg-green-500 rounded-full p-1">
                                <div class="w-4 h-4 bg-white rounded-full ml-auto"></div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center py-2">
                            <span class="text-sm text-gray-700">ƒê·ªìng b·ªô t·ª± ƒë·ªông</span>
                            <div class="w-10 h-6 bg-green-500 rounded-full p-1">
                                <div class="w-4 h-4 bg-white rounded-full ml-auto"></div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center py-2">
                            <span class="text-sm text-gray-700">Ch·∫ø ƒë·ªô ngo·∫°i tuy·∫øn</span>
                            <div class="w-10 h-6 bg-gray-300 rounded-full p-1">
                                <div class="w-4 h-4 bg-white rounded-full"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button class="fab" onclick="quickActions()">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showTab('home')">
                <i class="fas fa-home"></i>
                <span>Trang ch·ªß</span>
            </div>
            <div class="nav-item" onclick="showTab('tasks')">
                <i class="fas fa-tasks"></i>
                <span>C√¥ng vi·ªác</span>
                <div class="alert-badge">2</div>
            </div>
            <div class="nav-item" onclick="showTab('support')">
                <i class="fas fa-user-tie"></i>
                <span>K·ªπ thu·∫≠t</span>
                <div class="w-2 h-2 bg-green-500 rounded-full absolute top-1 right-3"></div>
            </div>
            <div class="nav-item" onclick="showTab('process')">
                <i class="fas fa-clipboard-list"></i>
                <span>Quy tr√¨nh</span>
            </div>
            <div class="nav-item" onclick="showTab('more')">
                <i class="fas fa-ellipsis-h"></i>
                <span>Th√™m</span>
            </div>
        </div>
    </div>

    <script>
        // Tab navigation
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Add active class to clicked nav item
            event.currentTarget.classList.add('active');
            
            // If opening process tab, show timeline section by default
            if (tabName === 'process') {
                setTimeout(() => {
                    showProcessSection('timeline');
                }, 100);
            }
        }

        // Zone selection and update status function
        function selectZone(zoneId) {
            const zoneDetails = {
                'A1': { trees: 20, area: '1.6ha', status: 'Kh·ªèe m·∫°nh', yield: '96%' },
                'A2': { trees: 19, area: '1.5ha', status: 'Kh·ªèe m·∫°nh', yield: '95%' },
                'A3': { trees: 18, area: '1.4ha', status: 'S√¢u ph·ªß qu·∫£', yield: '75%' },
                'A4': { trees: 21, area: '1.7ha', status: 'Xu·∫•t s·∫Øc', yield: '98%' },
                'B1': { trees: 17, area: '1.3ha', status: 'S√¢u ph·ªß qu·∫£', yield: '70%' },
                'B2': { trees: 20, area: '1.6ha', status: 'Kh·ªèe m·∫°nh', yield: '94%' },
                'B3': { trees: 16, area: '1.2ha', status: '2 c√¢y ch·∫øt', yield: '45%' },
                'B4': { trees: 19, area: '1.5ha', status: 'C√¢y non nƒÉm 2', yield: 'N/A' }
            };
            
            const zone = zoneDetails[zoneId];
            showNotification(`L√¥ ${zoneId}: ${zone.trees} c√¢y, ${zone.area}, ${zone.status}`, 'info');
        }

        // Update zone status function
        function updateZoneStatus() {
            showNotification('M·ªü form c·∫≠p nh·∫≠t t√¨nh tr·∫°ng ph√¢n khu...', 'info');
            // Simulate opening update form
            setTimeout(() => {
                const updateOptions = [
                    'B√°o c√°o c√¢y ch·∫øt/b·ªánh n·∫∑ng',
                    'C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng qu·∫£',
                    '∆Ø·ªõc t√≠nh nƒÉng su·∫•t',
                    'Thay ƒë·ªïi t√¨nh tr·∫°ng s·ª©c kh·ªèe',
                    'Ghi ch√∫ ƒë·∫∑c bi·ªát'
                ];
                
                showNotification('Form c·∫≠p nh·∫≠t: ' + updateOptions.join(', '), 'success');
            }, 1500);
        }

        // Quick actions
        function quickActions() {
            showNotification('M·ªü menu h√†nh ƒë·ªông nhanh...', 'info');
        }

        function quickLog() {
            showNotification('M·ªü nh·∫≠t k√Ω canh t√°c...', 'info');
        }

        function quickMaterial() {
            showNotification('Ki·ªÉm tra v·∫≠t t∆∞ nhanh...', 'info');
        }

        function quickPest() {
            showNotification('B√°o c√°o s√¢u b·ªánh...', 'info');
        }

        function quickWeather() {
            showNotification('Xem d·ª± b√°o th·ªùi ti·∫øt 7 ng√†y...', 'info');
        }

        // Task actions
        function startTask(taskId) {
            showNotification(`B·∫Øt ƒë·∫ßu c√¥ng vi·ªác: ${taskId}`, 'success');
        }

        function continueTask(taskId) {
            showNotification(`Ti·∫øp t·ª•c c√¥ng vi·ªác: ${taskId}`, 'info');
        }

        function scheduleTask(taskId) {
            showNotification(`L√™n l·ªãch cho c√¥ng vi·ªác: ${taskId}`, 'info');
        }

        function viewReport(taskId) {
            showNotification(`Xem b√°o c√°o: ${taskId}`, 'info');
        }

        // Communication
        function callTechnician() {
            showNotification('ƒêang g·ªçi cho KS. Ph·∫°m VƒÉn Minh...', 'info');
        }

        function chatTechnician() {
            showNotification('M·ªü chat v·ªõi k·ªπ thu·∫≠t vi√™n...', 'info');
        }

        // Enhanced technician interaction functions
        function quickCallTechnician() {
            showNotification('ƒêang g·ªçi KS. Ph·∫°m VƒÉn Minh...', 'info');
            // Simulate call connection
            setTimeout(() => {
                showNotification('Cu·ªôc g·ªçi ƒë√£ ƒë∆∞·ª£c k·∫øt n·ªëi', 'success');
            }, 2000);
        }
        
        function quickChatTechnician() {
            showNotification('M·ªü chat v·ªõi k·ªπ thu·∫≠t vi√™n...', 'info');
            showTab('support');
        }
        
        function openChat() {
            showNotification('M·ªü cu·ªôc tr√≤ chuy·ªán v·ªõi k·ªπ thu·∫≠t vi√™n...', 'info');
        }
        
        function videoCall() {
            showNotification('B·∫Øt ƒë·∫ßu video call v·ªõi k·ªπ thu·∫≠t vi√™n...', 'info');
        }
        
        function sendPhoto() {
            showNotification('M·ªü camera ƒë·ªÉ ch·ª•p ·∫£nh g·ª≠i k·ªπ thu·∫≠t vi√™n...', 'info');
        }
        
        function continueChat(chatId) {
            showNotification(`Ti·∫øp t·ª•c cu·ªôc tr√≤ chuy·ªán v·ªÅ ${chatId}...`, 'info');
        }
        
        function markAsCompleted(chatId) {
            showNotification(`ƒê√£ ƒë√°nh d·∫•u ho√†n th√†nh: ${chatId}`, 'success');
        }
        
        function rescheduleVisit() {
            showNotification('M·ªü l·ªãch ƒë·ªÉ ƒë·ªïi th·ªùi gian thƒÉm v∆∞·ªùn...', 'info');
        }
        
        function confirmVisit() {
            showNotification('ƒê√£ x√°c nh·∫≠n l·ªãch thƒÉm v∆∞·ªùn', 'success');
        }
        
        function emergencyCall() {
            showNotification('G·ªçi kh·∫©n c·∫•p ƒë·∫øn k·ªπ thu·∫≠t vi√™n...', 'warning');
        }
        
        function reportProblem() {
            showNotification('M·ªü form b√°o c√°o s·ª± c·ªë...', 'info');
        }
        
        function requestVisit() {
            showNotification('G·ª≠i y√™u c·∫ßu thƒÉm v∆∞·ªùn ƒë·ªôt xu·∫•t...', 'info');
        }
        
        function viewGuide(guideType) {
            const guides = {
                'pest-control': 'M·ªü h∆∞·ªõng d·∫´n ph√≤ng tr·ª´ s√¢u b·ªánh...',
                'fertilizer': 'M·ªü h∆∞·ªõng d·∫´n k·ªπ thu·∫≠t b√≥n ph√¢n...',
                'harvest': 'M·ªü h∆∞·ªõng d·∫´n thu ho·∫°ch...',
                'vietgap': 'M·ªü ti√™u chu·∫©n VietGAP...'
            };
            showNotification(guides[guideType] || 'M·ªü t√†i li·ªáu...', 'info');
        }

        // Enhanced task management functions
        function startUrgentTask(taskId) {
            showNotification(`B·∫Øt ƒë·∫ßu c√¥ng vi·ªác kh·∫©n c·∫•p: ${taskId}`, 'warning');
        }
        
        function askTechnicianHelp(taskId) {
            showNotification(`H·ªèi k·ªπ thu·∫≠t vi√™n v·ªÅ: ${taskId}`, 'info');
            // Auto switch to support tab
            setTimeout(() => {
                showTab('support');
            }, 1000);
        }
        
        function reportTaskProgress(taskId) {
            showNotification(`B√°o c√°o ti·∫øn ƒë·ªô: ${taskId}`, 'info');
        }
        
        function reportWithPhoto(taskId) {
            showNotification(`Ch·ª•p ·∫£nh b√°o c√°o: ${taskId}`, 'info');
        }
        
        function updateProgress(taskId) {
            showNotification(`C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô: ${taskId}`, 'info');
        }
        
        function startEarlyTask(taskId) {
            showNotification(`B·∫Øt ƒë·∫ßu c√¥ng vi·ªác s·ªõm: ${taskId}`, 'success');
        }
        
        function getTechnicianAdvice(taskId) {
            showNotification(`Xin t∆∞ v·∫•n k·ªπ thu·∫≠t cho: ${taskId}`, 'info');
        }
        
        function shareWithTechnician(taskId) {
            showNotification(`Chia s·∫ª v·ªõi k·ªπ thu·∫≠t vi√™n: ${taskId}`, 'info');
        }
        
        function getWeatherAdvice() {
            showNotification('T∆∞ v·∫•n ·ª©ng ph√≥ th·ªùi ti·∫øt t·ª´ k·ªπ thu·∫≠t vi√™n...', 'info');
        }

        // Task filtering functions
        function filterTasks(filter) {
            // Remove active class from all filter buttons
            document.querySelectorAll('.task-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            document.getElementById(filter + 'TasksBtn').classList.add('active');
            
            // Show/hide tasks based on filter
            const tasks = document.querySelectorAll('.task-item');
            tasks.forEach(task => {
                task.classList.remove('hidden');
                
                switch(filter) {
                    case 'urgent':
                        if (!task.classList.contains('urgent')) {
                            task.classList.add('hidden');
                        }
                        break;
                    case 'today':
                        if (!task.classList.contains('today')) {
                            task.classList.add('hidden');
                        }
                        break;
                    case 'inprogress':
                        if (!task.classList.contains('inprogress')) {
                            task.classList.add('hidden');
                        }
                        break;
                    case 'completed':
                        if (!task.classList.contains('completed')) {
                            task.classList.add('hidden');
                        }
                        break;
                    case 'all':
                    default:
                        // Show all tasks
                        break;
                }
            });
        }
        
        function addNewTask() {
            showNotification('Th√™m c√¥ng vi·ªác m·ªõi...', 'info');
        }

        // Enhanced emergency and utility functions
        function handleEmergency(type) {
            const emergencyActions = {
                'pest': 'Kh·ªüi ƒë·ªông quy tr√¨nh x·ª≠ l√Ω s√¢u b·ªánh kh·∫©n c·∫•p...',
                'weather': 'Chu·∫©n b·ªã ·ª©ng ph√≥ th·ªùi ti·∫øt x·∫•u...',
                'equipment': 'G·ªçi th·ª£ s·ª≠a ch·ªØa thi·∫øt b·ªã...'
            };
            showNotification(emergencyActions[type] || 'X·ª≠ l√Ω t√¨nh hu·ªëng kh·∫©n c·∫•p...', 'warning');
        }
        
        function prepareForRain() {
            showNotification('Chu·∫©n b·ªã cho ƒë·ª£t m∆∞a l·ªõn...', 'info');
        }
        
        function quickOrderMaterial(material) {
            showNotification(`T·∫°o ƒë∆°n ƒë·∫∑t h√†ng ${material}...`, 'info');
        }

        // Material management
        function addMaterial() {
            showNotification('Th√™m v·∫≠t t∆∞ m·ªõi...', 'info');
        }

        // Process management functions
        function showProcessSection(sectionName) {
            // Hide all process sections
            document.querySelectorAll('.process-section').forEach(section => {
                section.classList.remove('active');
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.process-nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.add('active');
                targetSection.classList.remove('hidden');
            }
            
            // Add active class to clicked button
            const targetBtn = document.getElementById(sectionName + 'Btn');
            if (targetBtn) {
                targetBtn.classList.add('active');
            }
        }

        function updateProcessYear() {
            const year = document.getElementById('processYearSelect').value;
            showNotification(`Chuy·ªÉn sang l·ªãch canh t√°c nƒÉm ${year}`, 'info');
        }

        function showAllMonths() {
            showNotification('Hi·ªÉn th·ªã l·ªãch canh t√°c ƒë·∫ßy ƒë·ªß 12 th√°ng...', 'info');
        }

        function viewTreatmentGuide(pestType) {
            const guides = {
                'fruit-borer': 'H∆∞·ªõng d·∫´n x·ª≠ l√Ω s√¢u ph·ªß qu·∫£: S·ª≠ d·ª•ng Imidacloprid 200SC, 1.5ml/L n∆∞·ªõc, phun bu·ªïi chi·ªÅu...',
                'thrips': 'H∆∞·ªõng d·∫´n x·ª≠ l√Ω thrips: S·ª≠ d·ª•ng Abamectin 18EC, 2ml/L n∆∞·ªõc...',
                'anthracnose': 'H∆∞·ªõng d·∫´n x·ª≠ l√Ω n·∫•m th√°n th∆∞: S·ª≠ d·ª•ng Copper Oxychloride, 2g/L n∆∞·ªõc...'
            };
            showNotification(guides[pestType] || 'ƒêang t·∫£i h∆∞·ªõng d·∫´n...', 'info');
        }

        function viewPestInfo(pestType) {
            const info = {
                'fruit-borer': 'S√¢u ph·ªß qu·∫£: Xu·∫•t hi·ªán m√πa m∆∞a, l√†m th·ªëi qu·∫£. Tri·ªáu ch·ª©ng: l·ªó nh·ªè tr√™n v·ªè qu·∫£...',
                'thrips': 'Thrips: C√¥n tr√πng nh·ªè, h·∫°i hoa v√† l√° non. Tri·ªáu ch·ª©ng: l√° b·ªã ƒë·ªëm b·∫°c...',
                'anthracnose': 'N·∫•m th√°n th∆∞: G√¢y ƒë·ªëm ƒëen tr√™n l√° v√† qu·∫£. Tri·ªáu ch·ª©ng: ƒë·ªëm tr√≤n m√†u n√¢u...'
            };
            showNotification(info[pestType] || 'ƒêang t·∫£i th√¥ng tin...', 'info');
        }

        function updateChecklist(checkbox) {
            const item = checkbox.closest('.checklist-item');
            if (checkbox.checked) {
                item.classList.add('completed');
            } else {
                item.classList.remove('completed');
            }
            
            // Update progress
            updateChecklistProgress();
        }

        function updateChecklistProgress() {
            const totalItems = document.querySelectorAll('.checklist-item input[type="checkbox"]').length;
            const completedItems = document.querySelectorAll('.checklist-item input[type="checkbox"]:checked').length;
            const percentage = Math.round((completedItems / totalItems) * 100);
            
            document.getElementById('checklistProgress').textContent = `${completedItems}/${totalItems} ho√†n th√†nh`;
            document.getElementById('checklistProgressBar').style.width = `${percentage}%`;
        }

        // Utility functions
        function showNotification(message, type = 'info') {
            const colors = {
                'info': 'bg-blue-500',
                'success': 'bg-green-500',
                'warning': 'bg-yellow-500',
                'error': 'bg-red-500'
            };
            
            const notification = document.createElement('div');
            notification.className = `fixed top-20 left-1/2 transform -translate-x-1/2 ${colors[type]} text-white px-4 py-2 rounded-lg text-sm z-50 shadow-lg`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('FarmKeeper Mobile App initialized');
            
            // Initialize checklist progress
            updateChecklistProgress();
            
            // Initialize task filtering
            filterTasks('all');
            
            // Simulate real-time updates
            setInterval(() => {
                // Update sensor values occasionally
                updateSensorValues();
                // Update technician status
                updateTechnicianStatus();
            }, 30000);
        });
        
        function updateTechnicianStatus() {
            // Simulate technician status changes
            const statusDots = document.querySelectorAll('.nav-item .w-2.h-2');
            statusDots.forEach(dot => {
                // Keep online status with slight animation
                dot.classList.add('animate-pulse');
            });
        }

        function updateSensorValues() {
            // Simulate minor sensor value changes
            const tempElement = document.querySelector('.sensor-value');
            if (tempElement) {
                const currentTemp = parseFloat(tempElement.textContent);
                const newTemp = (currentTemp + (Math.random() - 0.5) * 0.5).toFixed(1);
                tempElement.textContent = newTemp + '¬∞C';
            }
        }
    </script>
</body>
</html>