<!DOCTYPE html>
<html lang="vi" class="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Báo cáo mới - FARMKEEPER</title>

    <!-- Noto Sans font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      body {
        font-family: 'Noto Sans', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside class="w-64 bg-white shadow-lg flex flex-col no-print">
        <div class="p-4 border-b">
          <div class="flex items-center space-x-2">
            <img
              src="https://placehold.co/40x40/69BD70/white/png?text=FK"
              alt="FARMKEEPER Logo"
              class="rounded-md"
            />
            <span class="text-xl font-bold text-[#69BD70]">FARMKEEPER</span>
          </div>
        </div>
        <nav class="flex-1 p-4 space-y-2">
          <div>
            <h3 class="text-xs uppercase font-bold text-gray-400 mb-2">
              DANH MỤC
            </h3>
            <ul>
              <li>
                <a
                  href="#"
                  class="flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200"
                >
                  <i data-lucide="layout-dashboard" class="w-5 h-5 mr-3"></i>
                  Tổng quan
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200"
                >
                  <i data-lucide="droplets" class="w-5 h-5 mr-3"></i>
                  Quản lý tưới tiêu
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200"
                >
                  <i data-lucide="spray-can" class="w-5 h-5 mr-3"></i>
                  Quản lý sâu bệnh
                </a>
              </li>
              <li class="relative">
                <span
                  class="flex items-center p-3 rounded-lg text-gray-700 font-bold bg-gray-100 cursor-pointer"
                >
                  <i data-lucide="clipboard-list" class="w-5 h-5 mr-3"></i>
                  Quản lý kỹ thuật
                  <i
                    data-lucide="chevron-down"
                    class="w-4 h-4 ml-auto transition-transform duration-200 transform rotate-180"
                  ></i>
                </span>
                <ul class="ml-4 mt-2 space-y-1">
                  <li>
                    <a
                      href="#"
                      class="flex items-center p-2 rounded-lg text-gray-700 hover:bg-gray-200 transition-colors duration-200"
                    >
                      <i
                        data-lucide="dot"
                        class="w-5 h-5 mr-2 text-[#69BD70]"
                      ></i>
                      Sổ tay quy trình
                    </a>
                  </li>
                  <li>
                    <a
                      href="#"
                      class="flex items-center p-2 rounded-lg text-gray-700 bg-[#69BD70] bg-opacity-10 text-[#69BD70] font-semibold transition-colors duration-200"
                    >
                      <i
                        data-lucide="dot"
                        class="w-5 h-5 mr-2 text-[#69BD70]"
                      ></i>
                      Báo cáo nhân sự
                    </a>
                  </li>
                  <li>
                    <a
                      href="#"
                      class="flex items-center p-2 rounded-lg text-gray-700 hover:bg-gray-200 transition-colors duration-200"
                    >
                      <i
                        data-lucide="dot"
                        class="w-5 h-5 mr-2 text-[#69BD70]"
                      ></i>
                      Phân tích vườn cây
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 p-8 overflow-y-auto">
        <div class="max-w-4xl mx-auto">
          <!-- Page Header -->
          <div class="flex items-center mb-6">
            <a
              href="#"
              class="text-gray-500 hover:text-gray-700 transition-colors duration-200 mr-2"
            >
              <i data-lucide="arrow-left" class="w-6 h-6"></i>
            </a>
            <h1 class="text-3xl font-bold text-gray-800">Tạo Báo cáo mới</h1>
          </div>

          <!-- Form Card -->
          <div class="bg-white p-8 rounded-lg shadow-xl border border-gray-200">
            <form>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- Report Name -->
                <div>
                  <label
                    for="report-name"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Tên Báo cáo</label
                  >
                  <input
                    type="text"
                    id="report-name"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#69BD70] focus:border-transparent transition-all duration-200"
                    placeholder="Nhập tên báo cáo"
                  />
                </div>
                <!-- Report Period (Quarter & Year) -->
                <div class="grid grid-cols-2 gap-4">
                  <!-- Quarter Dropdown -->
                  <div class="relative">
                    <label
                      for="report-quarter"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Kỳ Báo cáo (Quý)</label
                    >
                    <select
                      id="report-quarter"
                      class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#69BD70] focus:border-transparent transition-all duration-200 appearance-none bg-white"
                    >
                      <option value="">Chọn quý</option>
                      <option value="Q1">Quý 1</option>
                      <option value="Q2">Quý 2</option>
                      <option value="Q3">Quý 3</option>
                      <option value="Q4">Quý 4</option>
                    </select>
                    <i
                      data-lucide="chevron-down"
                      class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                    ></i>
                  </div>
                  <!-- Year Dropdown -->
                  <div class="relative">
                    <label
                      for="report-year"
                      class="block text-sm font-medium text-gray-700 mb-1"
                      >Kỳ Báo cáo (Năm)</label
                    >
                    <select
                      id="report-year"
                      class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#69BD70] focus:border-transparent transition-all duration-200 appearance-none bg-white"
                    >
                      <option value="">Chọn năm</option>
                      <option>2026</option>
                      <option>2025</option>
                      <option>2024</option>
                      <option>2023</option>
                    </select>
                    <i
                      data-lucide="chevron-down"
                      class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                    ></i>
                  </div>
                </div>
              </div>

              <!-- Report Scope -->
              <div class="mb-6">
                <label
                  for="report-scope"
                  class="block text-sm font-medium text-gray-700 mb-1"
                  >Phạm vi</label
                >
                <input
                  type="text"
                  id="report-scope"
                  class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#69BD70] focus:border-transparent transition-all duration-200"
                  placeholder="Chọn phạm vi áp dụng (ví dụ: Toàn đội ngũ kỹ sư)"
                />
              </div>

              <!-- Section: Report Details -->
              <div class="mb-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4">
                  Nhập Chi tiết từng Kỹ sư
                </h3>

                <div class="mb-6">
                  <div id="engineer-details" class="space-y-6">
                    <!-- Dynamic engineer details will be added here -->
                    <div
                      class="border border-gray-200 rounded-lg p-6 bg-gray-50"
                    >
                      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4">
                        <!-- Engineer Name Dropdown -->
                        <div class="relative">
                          <label
                            for="engineer-name-1"
                            class="block text-xs font-medium text-gray-500 mb-1"
                            >Tên Kỹ sư</label
                          >
                          <select
                            id="engineer-name-1"
                            class="w-full p-2 text-sm border border-gray-300 rounded-md appearance-none bg-white"
                          >
                            <option value="">Chọn tên</option>
                            <option>Nguyễn Văn An</option>
                            <option>Trần Thị Bích</option>
                            <option>Vũ Thị Hoa</option>
                          </select>
                          <i
                            data-lucide="chevron-down"
                            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                          ></i>
                        </div>
                        <!-- Engineer Rank Dropdown -->
                        <div class="relative">
                          <label
                            for="engineer-rank-1"
                            class="block text-xs font-medium text-gray-500 mb-1"
                            >Cấp bậc</label
                          >
                          <select
                            id="engineer-rank-1"
                            class="w-full p-2 text-sm border border-gray-300 rounded-md appearance-none bg-white"
                          >
                            <option value="">Chọn cấp bậc</option>
                            <option>Senior</option>
                            <option>Standard</option>
                            <option>Junior</option>
                          </select>
                          <i
                            data-lucide="chevron-down"
                            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                          ></i>
                        </div>
                        <!-- Remove Button -->
                        <div class="flex items-end justify-end">
                          <button
                            type="button"
                            class="bg-red-500 text-white hover:bg-red-600 p-2 rounded-md transition-colors duration-200"
                          >
                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                          </button>
                        </div>
                      </div>

                      <!-- Nested Section for Gardens/Tasks -->
                      <div class="border-t pt-4 mt-4 border-gray-200">
                        <h4 class="text-sm font-bold text-gray-700 mb-3">
                          Danh sách Vườn/Nhiệm vụ
                        </h4>
                        <div id="gardens-for-engineer-1" class="space-y-3">
                          <!-- Dynamic garden rows will be added here -->
                          <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                            <div class="relative col-span-2">
                              <label
                                for="garden-name-1-1"
                                class="block text-xs font-medium text-gray-500 mb-1"
                                >Tên Vườn/Nhiệm vụ</label
                              >
                              <select
                                id="garden-name-1-1"
                                class="w-full p-2 text-sm border border-gray-300 rounded-md appearance-none bg-white"
                              >
                                <option value="">Chọn vườn</option>
                                <option value="Vườn số 123">
                                  Vườn số 123 (Hệ số: 2.5)
                                </option>
                                <option value="Vườn số 456">
                                  Vườn số 456 (Hệ số: 3.1)
                                </option>
                                <option value="Nhiệm vụ A">
                                  Nhiệm vụ A (Hệ số: 1.8)
                                </option>
                              </select>
                              <i
                                data-lucide="chevron-down"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
                              ></i>
                            </div>
                            <div class="flex items-end">
                              <button
                                type="button"
                                class="bg-red-500 text-white hover:bg-red-600 p-2 rounded-md transition-colors duration-200"
                              >
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                              </button>
                            </div>
                          </div>
                        </div>
                        <button
                          type="button"
                          onclick="addGardenRow(1)"
                          class="mt-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-1.5 px-3 text-sm rounded-md flex items-center"
                        >
                          <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Thêm
                          Vườn/Nhiệm vụ
                        </button>
                      </div>
                    </div>
                  </div>
                  <button
                    type="button"
                    onclick="addEngineerRow()"
                    class="mt-4 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-md flex items-center"
                  >
                    <i data-lucide="plus" class="w-5 h-5 mr-2"></i> Thêm Kỹ sư
                  </button>
                </div>
              </div>

              <!-- Analysis and Recommendation Textarea -->
              <div class="space-y-6 mb-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4">
                  4. Nhập Phân tích & Đề xuất
                </h3>
                <div>
                  <label
                    for="analysis-general"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Nhận xét chung (Không bắt buộc)</label
                  >
                  <textarea
                    id="analysis-general"
                    rows="3"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#69BD70] focus:border-transparent transition-all duration-200"
                    placeholder="Nhập nhận xét chung về hiệu quả nhân sự"
                  ></textarea>
                </div>
                <div>
                  <label
                    for="analysis-cases"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Các trường hợp cần chú ý (Không bắt buộc)</label
                  >
                  <textarea
                    id="analysis-cases"
                    rows="4"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#69BD70] focus:border-transparent transition-all duration-200"
                    placeholder="Liệt kê các trường hợp cần chú ý"
                  ></textarea>
                </div>
                <div>
                  <label
                    for="analysis-recommendation"
                    class="block text-sm font-medium text-gray-700 mb-1"
                    >Đề xuất `Điểm Khối lượng Công việc Chuẩn` cho kỳ tới (Không
                    bắt buộc)</label
                  >
                  <textarea
                    id="analysis-recommendation"
                    rows="3"
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#69BD70] focus:border-transparent transition-all duration-200"
                    placeholder="Nhập đề xuất hoặc mục tiêu cho kỳ tới"
                  ></textarea>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="flex justify-end">
                <button
                  type="submit"
                  class="bg-[#69BD70] hover:bg-[#5aa861] text-white font-bold py-3 px-6 rounded-md flex items-center transition-colors duration-200"
                >
                  <i data-lucide="plus" class="w-5 h-5 mr-2"></i> Tạo Báo cáo
                </button>
              </div>
            </form>
          </div>
        </div>
      </main>
    </div>

    <script>
      lucide.createIcons();

      let engineerCount = 1;
      let gardenCount = 1;

      function addEngineerRow() {
        engineerCount++;
        const container = document.getElementById('engineer-details');
        const newRow = document.createElement('div');
        newRow.className = 'border border-gray-200 rounded-lg p-6 bg-gray-50';
        newRow.innerHTML = `
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4">
                    <div class="relative">
                        <label for="engineer-name-${engineerCount}" class="block text-xs font-medium text-gray-500 mb-1">Tên Kỹ sư</label>
                        <select id="engineer-name-${engineerCount}" class="w-full p-2 text-sm border border-gray-300 rounded-md appearance-none bg-white">
                            <option value="">Chọn tên</option>
                            <option>Nguyễn Văn An</option>
                            <option>Trần Thị Bích</option>
                            <option>Vũ Thị Hoa</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <div class="relative">
                        <label for="engineer-rank-${engineerCount}" class="block text-xs font-medium text-gray-500 mb-1">Cấp bậc</label>
                        <select id="engineer-rank-${engineerCount}" class="w-full p-2 text-sm border border-gray-300 rounded-md appearance-none bg-white">
                            <option value="">Chọn cấp bậc</option>
                            <option>Senior</option>
                            <option>Standard</option>
                            <option>Junior</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <div class="flex items-end justify-end">
                        <button type="button" onclick="this.parentNode.parentNode.parentNode.remove()" class="bg-red-500 text-white hover:bg-red-600 p-2 rounded-md transition-colors duration-200">
                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>
                
                <div class="border-t pt-4 mt-4 border-gray-200">
                    <h4 class="text-sm font-bold text-gray-700 mb-3">Danh sách Vườn/Nhiệm vụ</h4>
                    <div id="gardens-for-engineer-${engineerCount}" class="space-y-3">
                        <!-- Garden rows will be dynamically added here -->
                    </div>
                    <button type="button" onclick="addGardenRow(${engineerCount})" class="mt-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-1.5 px-3 text-sm rounded-md flex items-center">
                        <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Thêm Vườn/Nhiệm vụ
                    </button>
                </div>
            `;
        container.appendChild(newRow);
        lucide.createIcons(); // Re-create icons for the new row
      }

      function addGardenRow(engineerId) {
        gardenCount++;
        const container = document.getElementById(
          `gardens-for-engineer-${engineerId}`
        );
        const newRow = document.createElement('div');
        newRow.className = 'grid grid-cols-1 sm:grid-cols-3 gap-2';
        newRow.innerHTML = `
                <div class="relative col-span-2">
                    <label for="garden-name-${engineerId}-${gardenCount}" class="block text-xs font-medium text-gray-500 mb-1">Tên Vườn/Nhiệm vụ</label>
                    <select id="garden-name-${engineerId}-${gardenCount}" class="w-full p-2 text-sm border border-gray-300 rounded-md appearance-none bg-white">
                        <option value="">Chọn vườn</option>
                        <option value="Vườn số 123">Vườn số 123 (Hệ số: 2.5)</option>
                        <option value="Vườn số 456">Vườn số 456 (Hệ số: 3.1)</option>
                        <option value="Nhiệm vụ A">Nhiệm vụ A (Hệ số: 1.8)</option>
                    </select>
                    <i data-lucide="chevron-down" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
                <div class="flex items-end">
                    <button type="button" onclick="this.parentNode.parentNode.remove()" class="bg-red-500 text-white hover:bg-red-600 p-2 rounded-md transition-colors duration-200">
                        <i data-lucide="trash-2" class="w-4 h-4"></i>
                    </button>
                </div>
            `;
        container.appendChild(newRow);
        lucide.createIcons(); // Re-create icons for the new row
      }
    </script>
  </body>
</html>
