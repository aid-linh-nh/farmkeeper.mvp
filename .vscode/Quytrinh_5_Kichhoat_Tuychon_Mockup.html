<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K√≠ch ho·∫°t Quy tr√¨nh S·∫ßu ri√™ng Dona - T√¢y Nguy√™n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
            line-height: 1.5;
            color: #1f2937;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .header {
            background: linear-gradient(135deg, #7c2d12 0%, #dc2626 100%);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="rgba(255,255,255,0.1)"><circle cx="50" cy="50" r="40"/><path d="M30,50 Q50,30 70,50 Q50,70 30,50"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 0.9rem;
        }
        
        .setup-options {
            display: grid;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .option-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .option-card:hover {
            border-color: #dc2626;
            box-shadow: 0 4px 20px rgba(220, 38, 38, 0.1);
        }
        
        .option-card.selected {
            border-color: #dc2626;
            background: linear-gradient(135deg, #fef2f2 0%, #fff5f5 100%);
        }
        
        .option-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .option-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .option-new .option-icon {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
        }
        
        .option-existing .option-icon {
            background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
            color: white;
        }
        
        .option-info h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .option-info p {
            color: #6b7280;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .radio-indicator {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .option-card.selected .radio-indicator {
            border-color: #dc2626;
            background: #dc2626;
        }
        
        .option-card.selected .radio-indicator::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
        }
        
        .stage-selector {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .stage-selector.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stage-selector h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        
        .stages-grid {
            display: grid;
            gap: 0.8rem;
        }
        
        .stage-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .stage-option:hover {
            border-color: #dc2626;
            background: #fef2f2;
        }
        
        .stage-option.selected {
            border-color: #dc2626;
            background: #fef2f2;
        }
        
        .stage-number {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        
        .stage-1 { background: #dc2626; }
        .stage-2 { background: #16a34a; }
        .stage-3 { background: #ea580c; }
        .stage-4 { background: #9333ea; }
        .stage-5 { background: #0891b2; }
        .stage-6 { background: #7c2d12; }
        
        .stage-details h5 {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.3rem;
        }
        
        .stage-details p {
            font-size: 0.8rem;
            color: #6b7280;
            line-height: 1.3;
        }
        
        .farm-info {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .farm-info.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        .farm-info h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .form-group label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #374151;
        }
        
        .form-group input,
        .form-group select {
            padding: 0.8rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }
        
        .preview-section {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .preview-section.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        .preview-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .preview-header h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .timeline-preview {
            display: grid;
            gap: 0.8rem;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            position: relative;
        }
        
        .timeline-item.active {
            border-color: #dc2626;
            background: linear-gradient(135deg, #fef2f2 0%, #fff5f5 100%);
        }
        
        .timeline-item.completed {
            border-color: #16a34a;
            background: linear-gradient(135deg, #f0fdf4 0%, #f7fee7 100%);
            opacity: 0.7;
        }
        
        .timeline-status {
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
        }
        
        .timeline-item.completed .timeline-status {
            background: #dcfce7;
            color: #16a34a;
        }
        
        .timeline-item.active .timeline-status {
            background: #fef3c7;
            color: #92400e;
        }
        
        .activation-footer {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .btn-activate-final {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 300px;
            disabled: false;
        }
        
        .btn-activate-final:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(22, 163, 74, 0.4);
        }
        
        .btn-activate-final:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .summary-info {
            background: #f8fafc;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .summary-info strong {
            color: #1f2937;
        }
        
        .back-button {
            background: #6b7280;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background: #4b5563;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0.5rem;
            }
            
            .header {
                padding: 1rem;
            }
            
            .header h1 {
                font-size: 1.25rem;
            }
            
            .option-card {
                padding: 1rem;
            }
            
            .option-header {
                flex-direction: column;
                text-align: center;
                gap: 0.8rem;
            }
            
            .option-icon {
                align-self: center;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="back-button" onclick="goBack()">‚Üê Quay l·∫°i quy tr√¨nh</button>
        
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>üöÄ K√≠ch ho·∫°t Quy tr√¨nh Canh t√°c S·∫ßu ri√™ng - T√¢y Nguy√™n</h1>
                <p>T√πy ch·ªçn Giai ƒëo·∫°n ph√π h·ª£p v·ªõi t√¨nh tr·∫°ng hi·ªán t·∫°i c·ªßa v∆∞·ªùn s·∫ßu ri√™ng</p>
            </div>
        </div>

        <!-- Setup Options -->
        <div class="setup-options">
            <div class="option-card option-new" onclick="selectOption('new')">
                <div class="radio-indicator"></div>
                <div class="option-header">
                    <div class="option-icon">üå±</div>
                    <div class="option-info">
                        <h3>Thi·∫øt l·∫≠p tr·ªìng m·ªõi</h3>
                        <p>B·∫Øt ƒë·∫ßu t·ª´ ƒë·∫ßu v·ªõi k·∫ø ho·∫°ch tr·ªìng m·ªõi ho√†n to√†n. √Åp d·ª•ng ƒë·∫ßy ƒë·ªß t·ª´ giai ƒëo·∫°n chu·∫©n b·ªã ƒë·∫•t ƒë·∫øn thu ho·∫°ch.</p>
                    </div>
                </div>
            </div>

            <div class="option-card option-existing" onclick="selectOption('existing')">
                <div class="radio-indicator"></div>
                <div class="option-header">
                    <div class="option-icon">üå≥</div>
                    <div class="option-info">
                        <h3>V∆∞·ªùn/Farm ƒëang canh t√°c</h3>
                        <p>√Åp d·ª•ng v√†o v∆∞·ªùn/Farm s·∫ßu ri√™ng ƒëang ho·∫°t ƒë·ªông. Ch·ªçn giai ƒëo·∫°n hi·ªán t·∫°i ƒë·ªÉ t√πy ch·ªânh quy tr√¨nh ph√π h·ª£p.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stage Selector for Existing Farm -->
        <div class="stage-selector" id="stageSelector">
            <h4>üéØ Ch·ªçn giai ƒëo·∫°n hi·ªán t·∫°i c·ªßa v∆∞·ªùn:</h4>
            <div class="stages-grid">
                <div class="stage-option" onclick="selectStage(1)">
                    <div class="stage-number stage-1">1</div>
                    <div class="stage-details">
                        <h5>Thi·∫øt l·∫≠p tr·ªìng m·ªõi</h5>
                        <p>ƒêang chu·∫©n b·ªã ƒë·∫•t, ch·ªçn gi·ªëng ho·∫∑c m·ªõi tr·ªìng (0-6 th√°ng)</p>
                    </div>
                </div>

                <div class="stage-option" onclick="selectStage(2)">
                    <div class="stage-number stage-2">2</div>
                    <div class="stage-details">
                        <h5>ChƒÉm s√≥c c√¢y con</h5>
                        <p>C√¢y 6 th√°ng - 2 tu·ªïi, ƒëang ph√°t tri·ªÉn th√¢n l√°</p>
                    </div>
                </div>

                <div class="stage-option" onclick="selectStage(3)">
                    <div class="stage-number stage-3">3</div>
                    <div class="stage-details">
                        <h5>D∆∞·ª°ng c√¢y chu·∫©n b·ªã ra hoa</h5>
                        <p>C√¢y 2-4 tu·ªïi, t√≠ch l≈©y dinh d∆∞·ª°ng ch∆∞a ra hoa</p>
                    </div>
                </div>

                <div class="stage-option" onclick="selectStage(4)">
                    <div class="stage-number stage-4">4</div>
                    <div class="stage-details">
                        <h5>Ra hoa</h5>
                        <p>C√¢y ƒëang ra hoa ho·∫∑c v·ª´a ra hoa (T12-T2)</p>
                    </div>
                </div>

                <div class="stage-option" onclick="selectStage(5)">
                    <div class="stage-number stage-5">5</div>
                    <div class="stage-details">
                        <h5>ChƒÉm s√≥c tr√°i</h5>
                        <p>Tr√°i ƒëang ph√°t tri·ªÉn, from ƒë·∫≠u tr√°i ƒë·∫øn g·∫ßn ch√≠n (T2-T5)</p>
                    </div>
                </div>

                <div class="stage-option" onclick="selectStage(6)">
                    <div class="stage-number stage-6">6</div>
                    <div class="stage-details">
                        <h5>Thu ho·∫°ch</h5>
                        <p>Chu·∫©n b·ªã thu ho·∫°ch ho·∫∑c ƒëang trong m√πa thu ho·∫°ch (T5-T8)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Farm Information Form -->
        <div class="farm-info" id="farmInfo">
            <h4>üìä Th√¥ng tin v∆∞·ªùn Dona c·ªßa b·∫°n:</h4>
            <div class="form-grid">
                <div class="form-group">
                    <label for="farmName">T√™n v∆∞·ªùn/farm:</label>
                    <input type="text" id="farmName" placeholder="VD: V∆∞·ªùn Dona T√¢y Nguy√™n">
                </div>

                <div class="form-group">
                    <label for="location">V·ªã tr√≠:</label>
                    <select id="location">
                        <option value="">Ch·ªçn khu v·ª±c</option>
                        <option value="daklak">ƒê·∫Øk L·∫Øk</option>
                        <option value="daknong">ƒê·∫Øk N√¥ng</option>
                        <option value="gialai">Gia Lai</option>
                        <option value="kontum">Kon Tum</option>
                        <option value="lamdong">L√¢m ƒê·ªìng</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="area">Di·ªán t√≠ch (ha):</label>
                    <input type="number" id="area" placeholder="VD: 2.5" step="0.1" min="0.1">
                </div>

                <div class="form-group">
                    <label for="treeCount">S·ªë c√¢y hi·ªán t·∫°i:</label>
                    <input type="number" id="treeCount" placeholder="VD: 275">
                </div>

                <div class="form-group">
                    <label for="treeAge">Tu·ªïi c√¢y (nƒÉm):</label>
                    <input type="number" id="treeAge" placeholder="VD: 3.5" step="0.5" min="0.5">
                </div>

                <div class="form-group">
                    <label for="varietyConfirm">Gi·ªëng Dona x√°c nh·∫≠n:</label>
                    <select id="varietyConfirm">
                        <option value="">Ch·ªçn t√¨nh tr·∫°ng</option>
                        <option value="confirmed">ƒê√£ x√°c nh·∫≠n Dona Thai</option>
                        <option value="likely">C√≥ th·ªÉ l√† Dona</option>
                        <option value="unknown">Ch∆∞a x√°c ƒë·ªãnh</option>
                        <option value="mixed">Tr·ªôn nhi·ªÅu gi·ªëng</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Preview Section -->
        <div class="preview-section" id="previewSection">
            <div class="preview-header">
                <span>üëÅÔ∏è</span>
                <h4>Xem tr∆∞·ªõc timeline t√πy ch·ªânh:</h4>
            </div>
            <div class="timeline-preview" id="timelinePreview">
                <!-- Timeline items will be generated here -->
            </div>
        </div>

        <!-- Activation Footer -->
        <div class="activation-footer">
            <div class="summary-info" id="summaryInfo">
                <strong>üìã T√≥m t·∫Øt:</strong> Ch∆∞a ch·ªçn t√πy ch·ªçn n√†o
            </div>
            <button class="btn-activate-final" id="activateBtn" onclick="finalActivate()" disabled>
                üöÄ K√≠ch ho·∫°t Quy tr√¨nh Dona
            </button>
            <p style="font-size: 0.8rem; color: #6b7280; margin-top: 0.5rem;">
                H·ªá th·ªëng s·∫Ω t·∫°o l·ªãch nh·∫Øc vi·ªác, c·∫£nh b√°o th·ªùi ti·∫øt v√† k·∫øt n·ªëi chuy√™n gia T√¢y Nguy√™n
            </p>
        </div>
    </div>

    <script>
        let selectedOption = '';
        let selectedStage = 0;
        
        const stageNames = [
            '',
            'Thi·∫øt l·∫≠p tr·ªìng m·ªõi',
            'ChƒÉm s√≥c c√¢y con',
            'D∆∞·ª°ng c√¢y chu·∫©n b·ªã ra hoa',
            'Ra hoa',
            'ChƒÉm s√≥c tr√°i',
            'Thu ho·∫°ch'
        ];

        function goBack() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën quay l·∫°i? C√°c th√¥ng tin ƒë√£ nh·∫≠p s·∫Ω b·ªã m·∫•t.')) {
                window.history.back();
            }
        }

        function selectOption(option) {
            selectedOption = option;
            
            // Update UI
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`.option-${option}`).classList.add('selected');
            
            // Show/hide stage selector
            const stageSelector = document.getElementById('stageSelector');
            const farmInfo = document.getElementById('farmInfo');
            
            if (option === 'existing') {
                stageSelector.classList.add('show');
                farmInfo.classList.add('show');
            } else {
                stageSelector.classList.remove('show');
                farmInfo.classList.add('show');
                selectedStage = 1; // Always start from stage 1 for new setup
                updatePreview();
            }
            
            updateSummary();
        }

        function selectStage(stage) {
            selectedStage = stage;
            
            // Update UI
            document.querySelectorAll('.stage-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`.stage-option:nth-child(${stage})`).classList.add('selected');
            
            updatePreview();
            updateSummary();
        }

        function updatePreview() {
            const previewSection = document.getElementById('previewSection');
            const timelinePreview = document.getElementById('timelinePreview');
            
            if (!selectedOption || !selectedStage) return;
            
            previewSection.classList.add('show');
            
            let timelineHTML = '';
            
            for (let i = 1; i <= 6; i++) {
                let status = '';
                let statusText = '';
                
                if (selectedOption === 'new') {
                    if (i === 1) {
                        status = 'active';
                        statusText = 'B·∫Øt ƒë·∫ßu';
                    } else {
                        statusText = 'Ch·ªù';
                    }
                } else {
                    if (i < selectedStage) {
                        status = 'completed';
                        statusText = 'Ho√†n th√†nh';
                    } else if (i === selectedStage) {
                        status = 'active';
                        statusText = 'Hi·ªán t·∫°i';
                    } else {
                        statusText = 'Ti·∫øp theo';
                    }
                }
                
                timelineHTML += `
                    <div class="timeline-item ${status}">
                        <div class="timeline-status">${statusText}</div>
                        <div class="stage-number stage-${i}">${i}</div>
                        <div class="stage-details">
                            <h5>${stageNames[i]}</h5>
                            <p>${getStageDescription(i)}</p>
                        </div>
                    </div>
                `;
            }
            
            timelinePreview.innerHTML = timelineHTML;
        }

        function getStageDescription(stage) {
            const descriptions = [
                '',
                'Chu·∫©n b·ªã ƒë·∫•t bazan, ch·ªçn gi·ªëng v√† tr·ªìng c√¢y',
                'ChƒÉm s√≥c c√¢y non, t·∫°o h√¨nh v√† ph√≤ng b·ªánh',
                'B√≥n ph√¢n tƒÉng tr∆∞·ªüng, chu·∫©n b·ªã ra hoa',
                'H·ªó tr·ª£ th·ª• ph·∫•n, chƒÉm s√≥c hoa',
                'T·ªâa tr√°i, b√≥n ph√¢n chuy√™n bi·ªát cho tr√°i',
                'Thu ho·∫°ch, ph√¢n lo·∫°i v√† ti√™u th·ª•'
            ];
            return descriptions[stage];
        }

        function updateSummary() {
            const summaryInfo = document.getElementById('summaryInfo');
            const activateBtn = document.getElementById('activateBtn');
            
            if (!selectedOption) {
                summaryInfo.innerHTML = '<strong>üìã T√≥m t·∫Øt:</strong> Ch∆∞a ch·ªçn t√πy ch·ªçn n√†o';
                activateBtn.disabled = true;
                return;
            }
            
            let summary = '';
            if (selectedOption === 'new') {
                summary = '<strong>üìã T√≥m t·∫Øt:</strong> Thi·∫øt l·∫≠p tr·ªìng m·ªõi - B·∫Øt ƒë·∫ßu t·ª´ giai ƒëo·∫°n 1 (Thi·∫øt l·∫≠p tr·ªìng m·ªõi)';
            } else if (selectedStage > 0) {
                summary = `<strong>üìã T√≥m t·∫Øt:</strong> V∆∞·ªùn hi·ªán t·∫°i ·ªü giai ƒëo·∫°n ${selectedStage} (${stageNames[selectedStage]})`;
            }
            
            summaryInfo.innerHTML = summary;
            activateBtn.disabled = !selectedOption || (selectedOption === 'existing' && !selectedStage);
        }

        function finalActivate() {
            // Get form data
            const farmName = document.getElementById('farmName').value || 'V∆∞·ªùn Dona c·ªßa t√¥i';
            const location = document.getElementById('location').value;
            const area = document.getElementById('area').value;
            const treeCount = document.getElementById('treeCount').value;
            const treeAge = document.getElementById('treeAge').value;
            const varietyConfirm = document.getElementById('varietyConfirm').value;
            
            // Validate required fields for existing farms
            if (selectedOption === 'existing') {
                if (!location || !area || !treeAge) {
                    alert('‚ö†Ô∏è Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin: V·ªã tr√≠, Di·ªán t√≠ch v√† Tu·ªïi c√¢y');
                    return;
                }
            }
            
            // Simulate activation
            const confirmMessage = `üöÄ X√°c nh·∫≠n k√≠ch ho·∫°t quy tr√¨nh:\n\n` +
                `üìù T√™n v∆∞·ªùn: ${farmName}\n` +
                `üìç V·ªã tr√≠: ${location ? getLocationName(location) : 'Ch∆∞a ch·ªçn'}\n` +
                `üìè Di·ªán t√≠ch: ${area ? area + ' ha' : 'Ch∆∞a nh·∫≠p'}\n` +
                `üå≥ Tu·ªïi c√¢y: ${treeAge ? treeAge + ' nƒÉm' : 'Ch∆∞a nh·∫≠p'}\n` +
                `üéØ B·∫Øt ƒë·∫ßu t·ª´: Giai ƒëo·∫°n ${selectedStage} - ${stageNames[selectedStage]}\n\n` +
                `H·ªá th·ªëng s·∫Ω:\n` +
                `‚úÖ T·∫°o l·ªãch c√¥ng vi·ªác c√° nh√¢n\n` +
                `‚úÖ C·∫£nh b√°o th·ªùi ti·∫øt T√¢y Nguy√™n\n` +
                `‚úÖ K·∫øt n·ªëi chuy√™n gia ƒë·ªãa ph∆∞∆°ng\n` +
                `‚úÖ Theo d√µi ti·∫øn ƒë·ªô v√† chi ph√≠\n\n` +
                `B·∫°n c√≥ mu·ªën ti·∫øp t·ª•c?`;
            
            if (confirm(confirmMessage)) {
                // Show loading state
                const btn = document.getElementById('activateBtn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚è≥ ƒêang k√≠ch ho·∫°t...';
                btn.disabled = true;
                
                // Simulate API call
                setTimeout(() => {
                    alert(`‚úÖ K√≠ch ho·∫°t th√†nh c√¥ng!\n\nüéâ Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi h·ªá th·ªëng Dona - T√¢y Nguy√™n!\n\nüì± T√≠nh nƒÉng ƒë√£ k√≠ch ho·∫°t:\n‚Ä¢ Dashboard theo d√µi ti·∫øn ƒë·ªô\n‚Ä¢ L·ªãch nh·∫Øc vi·ªác th√¥ng minh\n‚Ä¢ C·∫£nh b√°o th·ªùi ti·∫øt t·ª± ƒë·ªông\n‚Ä¢ Hotline chuy√™n gia: 1900-DONA\n‚Ä¢ K·∫øt n·ªëi th·ªã tr∆∞·ªùng xu·∫•t kh·∫©u\n\nüìß Link truy c·∫≠p ƒë√£ g·ª≠i v·ªÅ email c·ªßa b·∫°n!`);
                    
                    // Redirect to dashboard (simulated)
                    setTimeout(() => {
                        window.location.href = '#dashboard';
                    }, 2000);
                }, 2000);
            }
        }

        function getLocationName(code) {
            const locations = {
                'daklak': 'ƒê·∫Øk L·∫Øk',
                'daknong': 'ƒê·∫Øk N√¥ng', 
                'gialai': 'Gia Lai',
                'kontum': 'Kon Tum',
                'lamdong': 'L√¢m ƒê·ªìng'
            };
            return locations[code] || code;
        }

        // Auto-calculate tree count when area changes
        document.getElementById('area').addEventListener('input', function() {
            const area = parseFloat(this.value);
            if (area > 0) {
                const treeCountField = document.getElementById('treeCount');
                if (!treeCountField.value) {
                    // 110 trees per hectare for Dona
                    treeCountField.value = Math.round(area * 110);
                }
            }
        });

        // Form validation
        document.querySelectorAll('#farmInfo input, #farmInfo select').forEach(field => {
            field.addEventListener('input', updateSummary);
        });
    </script>
</body>
</html>