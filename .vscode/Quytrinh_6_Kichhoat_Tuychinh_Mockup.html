<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quy tr√¨nh Dona - ƒê√£ k√≠ch ho·∫°t</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
            line-height: 1.5;
            color: #1f2937;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0.5rem;
        }
        
        .activated-header {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .activated-header::before {
            content: '';
            position: absolute;
            top: -20px;
            right: -20px;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .status-info h1 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }
        
        .status-info p {
            opacity: 0.9;
            font-size: 0.85rem;
        }
        
        .header-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.6rem 1rem;
            border: none;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .btn-light {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-light:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .btn-deploy {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            font-weight: 700;
            padding: 0.8rem 1.5rem;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .btn-deploy::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .btn-deploy:hover::before {
            left: 100%;
        }

        .btn-deploy:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        .btn-deploy:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .customization-bar {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #ea580c;
        }
        
        .customization-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .customization-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .customization-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .btn-orange {
            background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%);
            color: white;
        }
        
        .btn-blue {
            background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
            color: white;
        }
        
        .btn-green {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
        }

        .deployment-section {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #dc2626;
            position: relative;
        }

        .deployment-section::before {
            content: 'üöÄ';
            position: absolute;
            top: -10px;
            left: 20px;
            background: white;
            padding: 0 10px;
            font-size: 1.5rem;
        }

        .deployment-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .deployment-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .deployment-subtitle {
            color: #6b7280;
            font-size: 0.95rem;
        }

        .readiness-check {
            background: #f9fafb;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border: 1px solid #e5e7eb;
        }

        .readiness-title {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .readiness-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.8rem;
        }

        .readiness-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .readiness-item.complete {
            color: #16a34a;
        }

        .readiness-item.incomplete {
            color: #dc2626;
        }

        .deployment-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn-deploy-main {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            font-weight: 700;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 10px;
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.3);
            position: relative;
            overflow: hidden;
            min-width: 250px;
        }

        .btn-deploy-main::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .btn-deploy-main:hover::before {
            left: 100%;
        }

        .btn-deploy-main:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
        }

        .btn-schedule {
            background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
            color: white;
            font-weight: 600;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            border-radius: 10px;
        }

        .deployment-note {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: #92400e;
        }

        .deployment-note strong {
            color: #78350f;
        }
        
        .timeline {
            position: relative;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 25px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #dc2626, #16a34a, #ea580c, #9333ea, #0891b2, #7c2d12);
            border-radius: 2px;
        }
        
        .stage {
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .stage-header {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.8rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            margin-left: 50px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .stage-header:hover {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
        }
        
        .stage-header::before {
            content: attr(data-stage);
            position: absolute;
            left: -37px;
            top: 50%;
            transform: translateY(-50%);
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.8rem;
        }
        
        .stage.stage-1 .stage-header::before { background: #dc2626; }
        .stage.stage-2 .stage-header::before { background: #16a34a; }
        .stage.stage-3 .stage-header::before { background: #ea580c; }
        .stage.stage-4 .stage-header::before { background: #9333ea; }
        .stage.stage-5 .stage-header::before { background: #0891b2; }
        .stage.stage-6 .stage-header::before { background: #7c2d12; }
        
        .stage-title-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.8rem;
        }
        
        .stage-info {
            flex: 1;
        }
        
        .stage-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.3rem;
        }
        
        .stage-status {
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
            background: #ddd6fe;
            color: #7c3aed;
            margin-bottom: 0.5rem;
            display: inline-block;
        }
        
        .stage-actions {
            display: flex;
            gap: 0.3rem;
            flex-wrap: wrap;
        }
        
        .btn-sm {
            padding: 0.4rem 0.6rem;
            font-size: 0.7rem;
        }
        
        .stage-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.8rem;
            margin-bottom: 0.8rem;
        }
        
        .stage-meta-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.8rem;
            color: #6b7280;
        }
        
        .stage-description {
            color: #4b5563;
            margin-bottom: 0.8rem;
            font-style: italic;
            font-size: 0.9rem;
        }
        
        .works-container {
            display: grid;
            gap: 0.8rem;
        }
        
        .work-item {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .work-item:hover {
            border-color: #dc2626;
            box-shadow: 0 2px 10px rgba(220, 38, 38, 0.1);
        }
        
        .work-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.8rem;
        }
        
        .work-info {
            flex: 1;
            margin-right: 1rem;
        }
        
        .work-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.3rem;
        }
        
        .work-status-badge {
            padding: 0.2rem 0.4rem;
            border-radius: 6px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            background: #fee2e2;
            color: #b91c1c;
            margin-bottom: 0.5rem;
            display: inline-block;
        }
        
        .work-actions {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
            min-width: 100px;
        }
        
        .work-meta {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
            margin-bottom: 0.8rem;
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        .work-meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .work-description {
            color: #4b5563;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .add-work-btn {
            border: 2px dashed #d1d5db;
            background: #f9fafb;
            color: #6b7280;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            margin-top: 0.8rem;
        }
        
        .add-work-btn:hover {
            border-color: #16a34a;
            background: #f0fdf4;
            color: #16a34a;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show .modal {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
            padding: 0.25rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }
        
        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }
        
        .btn-cancel {
            background: #6b7280;
            color: white;
        }
        
        .btn-save {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
        }
        
        .criteria-list {
            display: grid;
            gap: 0.8rem;
        }
        
        .criteria-item {
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
            padding: 0.8rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        
        .criteria-item input[type="checkbox"] {
            margin-top: 0.2rem;
        }
        
        .criteria-content {
            flex: 1;
        }
        
        .criteria-title {
            font-weight: 500;
            color: #1f2937;
            margin-bottom: 0.2rem;
        }
        
        .criteria-desc {
            font-size: 0.8rem;
            color: #6b7280;
        }
        
        .save-changes-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 1rem;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            border-top: 1px solid #e5e7eb;
            z-index: 100;
            transform: translateY(100%);
            transition: all 0.3s ease;
        }
        
        .save-changes-bar.show {
            transform: translateY(0);
        }
        
        .save-changes-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: between;
            align-items: center;
            gap: 1rem;
        }
        
        .changes-info {
            flex: 1;
            font-size: 0.9rem;
            color: #374151;
        }
        
        .save-actions {
            display: flex;
            gap: 0.8rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0.25rem;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .customization-header {
                flex-direction: column;
                gap: 0.8rem;
                align-items: flex-start;
            }
            
            .customization-actions {
                width: 100%;
                justify-content: flex-start;
            }
            
            .stage-header {
                margin-left: 35px;
                padding: 0.8rem;
            }
            
            .stage-title-row {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .work-header {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            .work-actions {
                flex-direction: row;
                flex-wrap: wrap;
                min-width: auto;
            }
            
            .stage-meta {
                grid-template-columns: 1fr;
            }
            
            .work-meta {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .modal {
                width: 95%;
                padding: 1rem;
            }
            
            .save-changes-content {
                flex-direction: column;
                text-align: center;
            }

            .deployment-actions {
                flex-direction: column;
                align-items: center;
            }

            .btn-deploy-main {
                min-width: auto;
                width: 100%;
            }

            .readiness-items {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Activated Header -->
        <div class="activated-header">
            <div class="header-content">
                <div class="status-info">
                    <h1>‚úÖ Quy tr√¨nh Dona ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t</h1>
                    <p>V∆∞·ªùn Dona c·ªßa t√¥i ‚Ä¢ ƒê·∫Øk L·∫Øk ‚Ä¢ 2.5 ha ‚Ä¢ 275 c√¢y ‚Ä¢ B·∫Øt ƒë·∫ßu t·ª´ giai ƒëo·∫°n 1</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-light" onclick="openDashboard()">
                        üìä Dashboard
                    </button>
                    <button class="btn btn-light" onclick="openSettings()">
                        ‚öôÔ∏è C√†i ƒë·∫∑t
                    </button>
                    <button class="btn btn-deploy" id="headerDeployBtn" onclick="scrollToDeployment()">
                        üöÄ TRI·ªÇN KHAI & GIAO VI·ªÜC
                    </button>
                </div>
            </div>
        </div>

        <!-- Customization Bar -->
        <div class="customization-bar">
            <div class="customization-header">
                <div class="customization-title">
                    üõ†Ô∏è T√πy ch·ªânh quy tr√¨nh theo ƒëi·ªÅu ki·ªán th·ª±c t·∫ø
                </div>
                <div class="customization-actions">
                    <button class="btn btn-sm btn-orange" onclick="addStage()">
                        ‚ûï Th√™m giai ƒëo·∫°n
                    </button>
                    <button class="btn btn-sm btn-blue" onclick="importTemplate()">
                        üì• Nh·∫≠p template
                    </button>
                    <button class="btn btn-sm btn-green" onclick="previewTimeline()">
                        üëÅÔ∏è Xem timeline
                    </button>
                </div>
            </div>
            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">
                ƒêi·ªÅu ch·ªânh c√¥ng vi·ªác, th√™m giai ƒëo·∫°n m·ªõi, ho·∫∑c t√πy ch·ªânh ti√™u chu·∫©n ƒë·ªÉ ph√π h·ª£p v·ªõi trang thi·∫øt b·ªã, nh√¢n c√¥ng v√† ng√¢n s√°ch c·ªßa b·∫°n.
            </p>
        </div>

        <!-- Timeline -->
        <div class="timeline">
            <!-- Stage 1 -->
            <div class="stage stage-1">
                <div class="stage-header" data-stage="1">
                    <div class="stage-title-row">
                        <div class="stage-info">
                            <div class="stage-name">üå± Giai ƒëo·∫°n: Thi·∫øt l·∫≠p tr·ªìng m·ªõi</div>
                            <div class="stage-status">ƒêang ho·∫°t ƒë·ªông</div>
                        </div>
                        <div class="stage-actions">
                            <button class="btn btn-sm btn-orange" onclick="editStage(1)">
                                ‚úèÔ∏è S·ª≠a giai ƒëo·∫°n
                            </button>
                            <button class="btn btn-sm btn-blue" onclick="duplicateStage(1)">
                                üìã Sao ch√©p
                            </button>
                        </div>
                    </div>
                    <div class="stage-meta">
                        <div class="stage-meta-item">
                            <span>‚è∞</span>
                            <span>3-4 th√°ng</span>
                        </div>
                        <div class="stage-meta-item">
                            <span>üí∞</span>
                            <span>80-120 tri·ªáu/ha</span>
                        </div>
                        <div class="stage-meta-item">
                            <span>üë•</span>
                            <span>15-20 c√¥ng/ha</span>
                        </div>
                        <div class="stage-meta-item">
                            <span>üîß</span>
                            <span>M√°y c√†y, cu·ªëc</span>
                        </div>
                    </div>
                    <div class="stage-description">
                        Chu·∫©n b·ªã ƒë·∫•t bazan, ch·ªçn gi·ªëng Dona ch·∫•t l∆∞·ª£ng cao v√† tr·ªìng theo k·ªπ thu·∫≠t ph√π h·ª£p v·ªõi ƒëi·ªÅu ki·ªán T√¢y Nguy√™n.
                    </div>
                </div>
                
                <div class="works-container">
                    <div class="work-item">
                        <div class="work-header">
                            <div class="work-info">
                                <div class="work-title">Kh·∫£o s√°t ƒë·ªãa h√¨nh v√† ph√¢n t√≠ch ƒë·∫•t bazan</div>
                                <div class="work-status-badge">B·∫Øt bu·ªôc</div>
                                <div class="work-meta">
                                    <div class="work-meta-item">
                                        <span>‚è±Ô∏è</span>
                                        <span>3-4 ng√†y</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üí∞</span>
                                        <span>600k-800k</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üéØ</span>
                                        <span>R·∫•t quan tr·ªçng</span>
                                    </div>
                                </div>
                                <div class="work-description">
                                    Kh·∫£o s√°t ƒë·ªô d·ªëc, h∆∞·ªõng s∆∞·ªùn v√† ph√¢n t√≠ch ƒë·∫•t bazan v·ªÅ pH, h√†m l∆∞·ª£ng Al3+, phospho v√† kh·∫£ nƒÉng tho√°t n∆∞·ªõc.
                                </div>
                            </div>
                            <div class="work-actions">
                                <button class="btn btn-sm btn-orange" onclick="editWork(1, 1)">
                                    ‚úèÔ∏è S·ª≠a chi ti·∫øt
                                </button>
                                <button class="btn btn-sm btn-blue" onclick="editCriteria(1, 1)">
                                    üìã Ti√™u chu·∫©n
                                </button>
                                <button class="btn btn-sm" onclick="duplicateWork(1, 1)">
                                    üìÑ Sao ch√©p
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="work-item">
                        <div class="work-header">
                            <div class="work-info">
                                <div class="work-title">X·ª≠ l√Ω ƒë·∫•t chua v√† b√≥n v√¥i</div>
                                <div class="work-status-badge">B·∫Øt bu·ªôc</div>
                                <div class="work-meta">
                                    <div class="work-meta-item">
                                        <span>‚è±Ô∏è</span>
                                        <span>3-4 ng√†y</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üí∞</span>
                                        <span>800k-1.2tr</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üéØ</span>
                                        <span>R·∫•t quan tr·ªçng</span>
                                    </div>
                                </div>
                                <div class="work-description">
                                    X·ª≠ l√Ω t√≠nh chua c·ªßa ƒë·∫•t bazan b·∫±ng v√¥i b·ªôt CaCO3, gi·∫£m h√†m l∆∞·ª£ng Al3+ ƒë·ªôc h·∫°i v√† n√¢ng pH l√™n 5.5-6.0.
                                </div>
                            </div>
                            <div class="work-actions">
                                <button class="btn btn-sm btn-orange" onclick="editWork(1, 2)">
                                    ‚úèÔ∏è S·ª≠a chi ti·∫øt
                                </button>
                                <button class="btn btn-sm btn-blue" onclick="editCriteria(1, 2)">
                                    üìã Ti√™u chu·∫©n
                                </button>
                                <button class="btn btn-sm" onclick="duplicateWork(1, 2)">
                                    üìÑ Sao ch√©p
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="work-item">
                        <div class="work-header">
                            <div class="work-info">
                                <div class="work-title">L√†m ƒë·∫•t v√† t·∫°o lu·ªëng ch·ªëng x√≥i m√≤n</div>
                                <div class="work-status-badge">B·∫Øt bu·ªôc</div>
                                <div class="work-meta">
                                    <div class="work-meta-item">
                                        <span>‚è±Ô∏è</span>
                                        <span>4-5 ng√†y</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üí∞</span>
                                        <span>1.2-1.8tr</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üéØ</span>
                                        <span>Quan tr·ªçng</span>
                                    </div>
                                </div>
                                <div class="work-description">
                                    L√†m ƒë·∫•t theo ƒë∆∞·ªùng ƒë·ªìng m·ª©c, t·∫°o lu·ªëng cao v√† m∆∞∆°ng tho√°t n∆∞·ªõc ƒë·ªÉ ch·ªëng x√≥i m√≤n tr√™n ƒë·ªãa h√¨nh d·ªëc.
                                </div>
                            </div>
                            <div class="work-actions">
                                <button class="btn btn-sm btn-orange" onclick="editWork(1, 3)">
                                    ‚úèÔ∏è S·ª≠a chi ti·∫øt
                                </button>
                                <button class="btn btn-sm btn-blue" onclick="editCriteria(1, 3)">
                                    üìã Ti√™u chu·∫©n
                                </button>
                                <button class="btn btn-sm" onclick="deleteWork(1, 3)">
                                    üóëÔ∏è X√≥a
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="add-work-btn" onclick="addWork(1)">
                        ‚ûï Th√™m c√¥ng vi·ªác v√†o giai ƒëo·∫°n n√†y
                    </div>
                </div>
            </div>

            <!-- Stage 2 -->
            <div class="stage stage-2">
                <div class="stage-header" data-stage="2">
                    <div class="stage-title-row">
                        <div class="stage-info">
                            <div class="stage-name">üåø Giai ƒëo·∫°n: ChƒÉm s√≥c c√¢y con</div>
                            <div class="stage-status">Ch∆∞a b·∫Øt ƒë·∫ßu</div>
                        </div>
                        <div class="stage-actions">
                            <button class="btn btn-sm btn-orange" onclick="editStage(2)">
                                ‚úèÔ∏è S·ª≠a giai ƒëo·∫°n
                            </button>
                            <button class="btn btn-sm btn-blue" onclick="duplicateStage(2)">
                                üìã Sao ch√©p
                            </button>
                        </div>
                    </div>
                    <div class="stage-meta">
                        <div class="stage-meta-item">
                            <span>‚è∞</span>
                            <span>NƒÉm 1-2</span>
                        </div>
                        <div class="stage-meta-item">
                            <span>üí∞</span>
                            <span>3-5 tri·ªáu/th√°ng</span>
                        </div>
                        <div class="stage-meta-item">
                            <span>üë•</span>
                            <span>8-12 c√¥ng/th√°ng</span>
                        </div>
                        <div class="stage-meta-item">
                            <span>üîß</span>
                            <span>K√©o c·∫Øt, t∆∞·ªõi</span>
                        </div>
                    </div>
                    <div class="stage-description">
                        T·∫≠p trung ph√°t tri·ªÉn h·ªá th·ªëng r·ªÖ v√† t√°n l√°, t·∫°o h√¨nh c√¢y th·∫•p ch·ªãu gi√≥, ph√≤ng tr·ª´ s√¢u b·ªánh c√¢y non.
                    </div>
                </div>
                
                <div class="works-container">
                    <div class="work-item">
                        <div class="work-header">
                            <div class="work-info">
                                <div class="work-title">ChƒÉm s√≥c c√¢y non sau tr·ªìng</div>
                                <div class="work-status-badge">ChƒÉm s√≥c ƒë·∫∑c bi·ªát</div>
                                <div class="work-meta">
                                    <div class="work-meta-item">
                                        <span>‚è±Ô∏è</span>
                                        <span>30 ng√†y ƒë·∫ßu</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üí∞</span>
                                        <span>500k-800k</span>
                                    </div>
                                    <div class="work-meta-item">
                                        <span>üéØ</span>
                                        <span>R·∫•t quan tr·ªçng</span>
                                    </div>
                                </div>
                                <div class="work-description">
                                    Theo d√µi s√°t sao, t∆∞·ªõi n∆∞·ªõc ƒë·ªÅu ƒë·∫∑n, che n·∫Øng v√† x·ª≠ l√Ω k·ªãp th·ªùi c√°c v·∫•n ƒë·ªÅ nh∆∞ h√©o c√¢y, s√¢u b·ªánh.
                                </div>
                            </div>
                            <div class="work-actions">
                                <button class="btn btn-sm btn-orange" onclick="editWork(2, 1)">
                                    ‚úèÔ∏è S·ª≠a chi ti·∫øt
                                </button>
                                <button class="btn btn-sm btn-blue" onclick="editCriteria(2, 1)">
                                    üìã Ti√™u chu·∫©n
                                </button>
                                <button class="btn btn-sm" onclick="duplicateWork(2, 1)">
                                    üìÑ Sao ch√©p
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="add-work-btn" onclick="addWork(2)">
                        ‚ûï Th√™m c√¥ng vi·ªác v√†o giai ƒëo·∫°n n√†y
                    </div>
                </div>
            </div>

            <!-- Collapsed stages indicator -->
            <div style="text-align: center; padding: 1rem; color: #6b7280; font-size: 0.9rem;">
                <button class="btn btn-light" onclick="expandAllStages()" style="background: white; color: #6b7280; border: 1px solid #d1d5db;">
                    üìã Hi·ªÉn th·ªã t·∫•t c·∫£ giai ƒëo·∫°n (4 giai ƒëo·∫°n c√≤n l·∫°i)
                </button>
            </div>
        </div>

        <!-- Deployment Section -->
        <div class="deployment-section" id="deploymentSection">
            <div class="deployment-header">
                <h2 class="deployment-title">üöÄ S·∫µn s√†ng tri·ªÉn khai quy tr√¨nh?</h2>
                <p class="deployment-subtitle">Ki·ªÉm tra ƒë·ªô s·∫µn s√†ng v√† b·∫Øt ƒë·∫ßu th·ª±c hi·ªán quy tr√¨nh canh t√°c Dona</p>
            </div>

            <div class="readiness-check">
                <div class="readiness-title">
                    üìã Ki·ªÉm tra ƒë·ªô s·∫µn s√†ng tri·ªÉn khai
                </div>
                <div class="readiness-items">
                    <div class="readiness-item complete">
                        <span>‚úÖ</span>
                        <span>ƒê√£ t√πy ch·ªânh quy tr√¨nh ph√π h·ª£p</span>
                    </div>
                    <div class="readiness-item complete">
                        <span>‚úÖ</span>
                        <span>ƒê√£ thi·∫øt l·∫≠p ti√™u chu·∫©n ƒë√°nh gi√°</span>
                    </div>
                    <div class="readiness-item complete">
                        <span>‚úÖ</span>
                        <span>C√≥ ƒë·ªß trang thi·∫øt b·ªã c·∫ßn thi·∫øt</span>
                    </div>
                    <div class="readiness-item incomplete">
                        <span>‚è≥</span>
                        <span>ƒê√£ chu·∫©n b·ªã ng√¢n s√°ch cho giai ƒëo·∫°n 1</span>
                    </div>
                    <div class="readiness-item complete">
                        <span>‚úÖ</span>
                        <span>ƒê√£ s·∫Øp x·∫øp nh√¢n c√¥ng</span>
                    </div>
                    <div class="readiness-item incomplete">
                        <span>‚è≥</span>
                        <span>ƒê√£ li√™n h·ªá chuy√™n gia h·ªó tr·ª£</span>
                    </div>
                </div>
            </div>

            <div class="deployment-actions">
                <button class="btn btn-deploy-main" onclick="startDeployment()" id="deploymentBtn">
                    üöÄ TRI·ªÇN KHAI & GIAO VI·ªÜC
                </button>
            </div>

            <div class="deployment-note">
                <strong>üí° L∆∞u √Ω:</strong> Sau khi b·∫Øt ƒë·∫ßu tri·ªÉn khai, b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn giao di·ªán theo d√µi ti·∫øn ƒë·ªô th·ª±c hi·ªán. 
                H·ªá th·ªëng s·∫Ω nh·∫Øc nh·ªü c√°c c√¥ng vi·ªác c·∫ßn l√†m theo ƒë√∫ng th·ªùi gian v√† g·ª≠i c·∫£nh b√°o khi c√≥ v·∫•n ƒë·ªÅ ph√°t sinh.
            </div>
        </div>

        <!-- Save Changes Bar -->
        <div class="save-changes-bar" id="saveChangesBar">
            <div class="save-changes-content">
                <div class="changes-info">
                    <strong>üíæ B·∫°n c√≥ thay ƒë·ªïi ch∆∞a l∆∞u:</strong> <span id="changesCount">0 thay ƒë·ªïi</span>
                </div>
                <div class="save-actions">
                    <button class="btn btn-cancel" onclick="discardChanges()">
                        H·ªßy thay ƒë·ªïi
                    </button>
                    <button class="btn btn-save" onclick="saveAllChanges()">
                        üíæ L∆∞u t·∫•t c·∫£
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for editing work details -->
    <div class="modal-overlay" id="workModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚úèÔ∏è Ch·ªânh s·ª≠a chi ti·∫øt c√¥ng vi·ªác</h3>
                <button class="close-btn" onclick="closeModal('workModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="workTitle">T√™n c√¥ng vi·ªác:</label>
                    <input type="text" id="workTitle" placeholder="Nh·∫≠p t√™n c√¥ng vi·ªác">
                </div>

                <div class="form-group">
                    <label for="workDuration">Th·ªùi gian th·ª±c hi·ªán:</label>
                    <input type="text" id="workDuration" placeholder="VD: 3-4 ng√†y">
                </div>

                <div class="form-group">
                    <label for="workCost">Chi ph√≠ ∆∞·ªõc t√≠nh:</label>
                    <input type="text" id="workCost" placeholder="VD: 600k-800k">
                </div>

                <div class="form-group">
                    <label for="workPriority">ƒê·ªô ∆∞u ti√™n:</label>
                    <select id="workPriority">
                        <option value="low">Khuy·∫øn ngh·ªã</option>
                        <option value="medium">Quan tr·ªçng</option>
                        <option value="high">R·∫•t quan tr·ªçng</option>
                        <option value="required">B·∫Øt bu·ªôc</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="workDescription">M√¥ t·∫£ chi ti·∫øt:</label>
                    <textarea id="workDescription" placeholder="M√¥ t·∫£ chi ti·∫øt c√°ch th·ª±c hi·ªán c√¥ng vi·ªác..."></textarea>
                </div>

                <div class="form-group">
                    <label for="workTools">Trang thi·∫øt b·ªã c·∫ßn thi·∫øt:</label>
                    <textarea id="workTools" placeholder="Danh s√°ch m√°y m√≥c, d·ª•ng c·ª•, v·∫≠t t∆∞..."></textarea>
                </div>

                <div class="form-group">
                    <label for="workConditions">ƒêi·ªÅu ki·ªán th·ª±c hi·ªán:</label>
                    <textarea id="workConditions" placeholder="Th·ªùi ti·∫øt, ƒëi·ªÅu ki·ªán m√¥i tr∆∞·ªùng..."></textarea>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('workModal')">H·ªßy</button>
                <button class="btn btn-save" onclick="saveWorkChanges()">üíæ L∆∞u thay ƒë·ªïi</button>
            </div>
        </div>
    </div>

    <!-- Modal for editing criteria -->
    <div class="modal-overlay" id="criteriaModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">üìã Ti√™u chu·∫©n ƒë√°nh gi√°</h3>
                <button class="close-btn" onclick="closeModal('criteriaModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: #6b7280; margin-bottom: 1rem;">Ch·ªçn c√°c ti√™u chu·∫©n √°p d·ª•ng cho c√¥ng vi·ªác n√†y:</p>
                <div class="criteria-list">
                    <div class="criteria-item">
                        <input type="checkbox" id="criteria1" checked>
                        <div class="criteria-content">
                            <div class="criteria-title">Ho√†n th√†nh ƒë√∫ng th·ªùi gian</div>
                            <div class="criteria-desc">C√¥ng vi·ªác ƒë∆∞·ª£c th·ª±c hi·ªán trong th·ªùi gian quy ƒë·ªãnh</div>
                        </div>
                    </div>
                    
                    <div class="criteria-item">
                        <input type="checkbox" id="criteria2" checked>
                        <div class="criteria-content">
                            <div class="criteria-title">ƒê√∫ng k·ªπ thu·∫≠t</div>
                            <div class="criteria-desc">Tu√¢n th·ªß quy tr√¨nh k·ªπ thu·∫≠t ƒë∆∞·ª£c khuy·∫øn ngh·ªã</div>
                        </div>
                    </div>
                    
                    <div class="criteria-item">
                        <input type="checkbox" id="criteria3">
                        <div class="criteria-content">
                            <div class="criteria-title">Ch·ª©ng t·ª´ ƒë·∫ßy ƒë·ªß</div>
                            <div class="criteria-desc">C√≥ ·∫£nh/video minh ch·ª©ng qu√° tr√¨nh th·ª±c hi·ªán</div>
                        </div>
                    </div>
                    
                    <div class="criteria-item">
                        <input type="checkbox" id="criteria4">
                        <div class="criteria-content">
                            <div class="criteria-title">Ti·∫øt ki·ªám chi ph√≠</div>
                            <div class="criteria-desc">Chi ph√≠ th·ª±c t·∫ø kh√¥ng v∆∞·ª£t qu√° 110% d·ª± ki·∫øn</div>
                        </div>
                    </div>
                    
                    <div class="criteria-item">
                        <input type="checkbox" id="criteria5">
                        <div class="criteria-content">
                            <div class="criteria-title">An to√†n lao ƒë·ªông</div>
                            <div class="criteria-desc">Tu√¢n th·ªß quy ƒë·ªãnh an to√†n trong qu√° tr√¨nh th·ª±c hi·ªán</div>
                        </div>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 1.5rem;">
                    <label for="customCriteria">Th√™m ti√™u chu·∫©n t√πy ch·ªânh:</label>
                    <textarea id="customCriteria" placeholder="Nh·∫≠p ti√™u chu·∫©n ri√™ng ph√π h·ª£p v·ªõi ƒëi·ªÅu ki·ªán c·ªßa b·∫°n..."></textarea>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('criteriaModal')">H·ªßy</button>
                <button class="btn btn-save" onclick="saveCriteriaChanges()">üíæ L∆∞u ti√™u chu·∫©n</button>
            </div>
        </div>
    </div>

    <!-- Modal for adding work -->
    <div class="modal-overlay" id="addWorkModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï Th√™m c√¥ng vi·ªác m·ªõi</h3>
                <button class="close-btn" onclick="closeModal('addWorkModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newWorkTitle">T√™n c√¥ng vi·ªác:</label>
                    <input type="text" id="newWorkTitle" placeholder="VD: X√¢y d·ª±ng h·ªá th·ªëng t∆∞·ªõi nh·ªè gi·ªçt">
                </div>

                <div class="form-group">
                    <label for="newWorkType">Lo·∫°i c√¥ng vi·ªác:</label>
                    <select id="newWorkType">
                        <option value="">Ch·ªçn lo·∫°i c√¥ng vi·ªác</option>
                        <option value="soil">Chu·∫©n b·ªã ƒë·∫•t</option>
                        <option value="planting">Tr·ªìng v√† chƒÉm s√≥c</option>
                        <option value="fertilizing">B√≥n ph√¢n</option>
                        <option value="irrigation">T∆∞·ªõi n∆∞·ªõc</option>
                        <option value="pest">Ph√≤ng tr·ª´ s√¢u b·ªánh</option>
                        <option value="pruning">C·∫Øt t·ªâa</option>
                        <option value="harvest">Thu ho·∫°ch</option>
                        <option value="other">Kh√°c</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="newWorkDescription">M√¥ t·∫£ chi ti·∫øt:</label>
                    <textarea id="newWorkDescription" placeholder="M√¥ t·∫£ chi ti·∫øt c√°ch th·ª±c hi·ªán c√¥ng vi·ªác n√†y..."></textarea>
                </div>

                <div class="form-group">
                    <label for="newWorkDuration">Th·ªùi gian th·ª±c hi·ªán:</label>
                    <input type="text" id="newWorkDuration" placeholder="VD: 2-3 ng√†y">
                </div>

                <div class="form-group">
                    <label for="newWorkCost">Chi ph√≠ ∆∞·ªõc t√≠nh:</label>
                    <input type="text" id="newWorkCost" placeholder="VD: 1-2 tri·ªáu">
                </div>

                <div class="form-group">
                    <label for="newWorkPriority">ƒê·ªô ∆∞u ti√™n:</label>
                    <select id="newWorkPriority">
                        <option value="low">Khuy·∫øn ngh·ªã</option>
                        <option value="medium">Quan tr·ªçng</option>
                        <option value="high">R·∫•t quan tr·ªçng</option>
                        <option value="required">B·∫Øt bu·ªôc</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('addWorkModal')">H·ªßy</button>
                <button class="btn btn-save" onclick="saveNewWork()">‚ûï Th√™m c√¥ng vi·ªác</button>
            </div>
        </div>
    </div>

    <!-- Deployment Confirmation Modal -->
    <div class="modal-overlay" id="deploymentModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">üöÄ X√°c nh·∫≠n tri·ªÉn khai quy tr√¨nh</h3>
                <button class="close-btn" onclick="closeModal('deploymentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 1.5rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üéØ</div>
                    <h4 style="color: #1f2937; margin-bottom: 0.5rem;">S·∫µn s√†ng b·∫Øt ƒë·∫ßu h√†nh tr√¨nh canh t√°c Dona?</h4>
                    <p style="color: #6b7280; font-size: 0.9rem;">H·ªá th·ªëng s·∫Ω chuy·ªÉn b·∫°n v√†o ch·∫ø ƒë·ªô tri·ªÉn khai th·ª±c t·∫ø</p>
                </div>

                <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                    <h5 style="color: #166534; margin-bottom: 0.5rem;">‚úÖ ƒêi·ªÅu b·∫°n s·∫Ω c√≥:</h5>
                    <ul style="color: #166534; font-size: 0.9rem; margin-left: 1rem;">
                        <li>L·ªãch nh·∫Øc vi·ªác h√†ng ng√†y</li>
                        <li>H∆∞·ªõng d·∫´n chi ti·∫øt t·ª´ng b∆∞·ªõc</li>
                        <li>Theo d√µi ti·∫øn ƒë·ªô real-time</li>
                        <li>H·ªó tr·ª£ chuy√™n gia 24/7</li>
                        <li>B√°o c√°o v√† ph√¢n t√≠ch k·∫øt qu·∫£</li>
                    </ul>
                </div>

                <div style="background: #fefce8; border: 1px solid #fde047; border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #ca8a04; margin-bottom: 0.5rem;">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng:</h5>
                    <ul style="color: #ca8a04; font-size: 0.9rem; margin-left: 1rem;">
                        <li>ƒê·∫£m b·∫£o ƒë√£ chu·∫©n b·ªã ƒë·ªß ng√¢n s√°ch cho giai ƒëo·∫°n 1</li>
                        <li>Li√™n h·ªá chuy√™n gia n·∫øu c·∫ßn h·ªó tr·ª£ k·ªπ thu·∫≠t</li>
                        <li>Backup d·ªØ li·ªáu quy tr√¨nh ƒë√£ t√πy ch·ªânh</li>
                    </ul>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-cancel" onclick="closeModal('deploymentModal')">
                    üîÑ Quay l·∫°i ki·ªÉm tra
                </button>
                <button class="btn btn-save" onclick="confirmDeployment()" style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);">
                    üöÄ X√°c nh·∫≠n tri·ªÉn khai
                </button>
            </div>
        </div>
    </div>

    <script>
        let hasChanges = false;
        let changeCount = 0;
        let readinessScore = 66; // 4/6 items complete

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // Deployment functions
        function scrollToDeployment() {
            document.getElementById('deploymentSection').scrollIntoView({ 
                behavior: 'smooth',
                block: 'center' 
            });
        }

        function startDeployment() {
            if (readinessScore < 100) {
                if (confirm('‚ö†Ô∏è M·ªôt s·ªë m·ª•c chu·∫©n b·ªã ch∆∞a ho√†n th√†nh.\n\nB·∫°n c√≥ mu·ªën ti·∫øp t·ª•c tri·ªÉn khai kh√¥ng?\n\n(Khuy·∫øn ngh·ªã: Ho√†n th√†nh t·∫•t c·∫£ m·ª•c tr∆∞·ªõc khi tri·ªÉn khai)')) {
                    openModal('deploymentModal');
                }
            } else {
                openModal('deploymentModal');
            }
        }

        function scheduleDeployment() {
            alert('üìÖ L√™n l·ªãch tri·ªÉn khai:\n\n‚Ä¢ Ch·ªçn ng√†y b·∫Øt ƒë·∫ßu ph√π h·ª£p\n‚Ä¢ Thi·∫øt l·∫≠p nh·∫Øc nh·ªü tr∆∞·ªõc\n‚Ä¢ Chu·∫©n b·ªã t√†i nguy√™n\n‚Ä¢ Th√¥ng b√°o ƒë·ªôi ng≈©\n\nH·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông k√≠ch ho·∫°t v√†o th·ªùi ƒëi·ªÉm ƒë√£ ch·ªçn.');
        }

        function confirmDeployment() {
            // Simulate deployment process
            closeModal('deploymentModal');
            
            // Show loading state
            const deployBtn = document.getElementById('deploymentBtn');
            deployBtn.innerHTML = '‚è≥ ƒêang tri·ªÉn khai...';
            deployBtn.disabled = true;
            
            // Simulate deployment completion
            setTimeout(() => {
                alert('üéâ TRI·ªÇN KHAI TH√ÄNH C√îNG!\n\n‚úÖ Quy tr√¨nh ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t\n‚úÖ L·ªãch nh·∫Øc vi·ªác ƒë√£ ƒë∆∞·ª£c thi·∫øt l·∫≠p\n‚úÖ Dashboard theo d√µi ƒë√£ s·∫µn s√†ng\n\nB·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn giao di·ªán qu·∫£n l√Ω ti·∫øn ƒë·ªô.');
                
                // Redirect to execution dashboard (simulated)
                setTimeout(() => {
                    alert('üîÑ Chuy·ªÉn ƒë·∫øn Dashboard th·ª±c thi...\n\nT·∫°i ƒë√¢y b·∫°n s·∫Ω:\n‚Ä¢ Xem c√¥ng vi·ªác h√¥m nay\n‚Ä¢ C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô\n‚Ä¢ Nh·∫≠n h∆∞·ªõng d·∫´n chi ti·∫øt\n‚Ä¢ Li√™n h·ªá chuy√™n gia');
                }, 1000);
            }, 2000);
        }

        // Work editing functions
        function editWork(stageId, workId) {
            // Populate form with current work data
            document.getElementById('workTitle').value = 'Kh·∫£o s√°t ƒë·ªãa h√¨nh v√† ph√¢n t√≠ch ƒë·∫•t bazan';
            document.getElementById('workDuration').value = '3-4 ng√†y';
            document.getElementById('workCost').value = '600k-800k';
            document.getElementById('workPriority').value = 'required';
            document.getElementById('workDescription').value = 'Kh·∫£o s√°t ƒë·ªô d·ªëc, h∆∞·ªõng s∆∞·ªùn v√† ph√¢n t√≠ch ƒë·∫•t bazan v·ªÅ pH, h√†m l∆∞·ª£ng Al3+, phospho v√† kh·∫£ nƒÉng tho√°t n∆∞·ªõc.';
            document.getElementById('workTools').value = 'M√°y ƒëo ƒë·ªô d·ªëc v√† GPS\nB·ªô test pH v√† Al3+ nhanh\n√îng khoan ƒë·∫•t s√¢u 1.5m';
            document.getElementById('workConditions').value = 'Th·ªùi ti·∫øt kh√¥ r√°o\nƒê·∫•t kh√¥ng qu√° ∆∞·ªõt\nC√≥ th·ªÉ truy c·∫≠p b·∫±ng xe';
            
            openModal('workModal');
        }

        function editCriteria(stageId, workId) {
            openModal('criteriaModal');
        }

        function addWork(stageId) {
            document.getElementById('newWorkTitle').value = '';
            document.getElementById('newWorkDescription').value = '';
            document.getElementById('newWorkDuration').value = '';
            document.getElementById('newWorkCost').value = '';
            document.getElementById('newWorkType').value = '';
            document.getElementById('newWorkPriority').value = 'medium';
            
            openModal('addWorkModal');
        }

        function duplicateWork(stageId, workId) {
            if (confirm('B·∫°n c√≥ mu·ªën sao ch√©p c√¥ng vi·ªác n√†y kh√¥ng?')) {
                markChanges();
                alert('‚úÖ ƒê√£ sao ch√©p c√¥ng vi·ªác. B·∫°n c√≥ th·ªÉ ch·ªânh s·ª≠a b·∫£n sao.');
            }
        }

        function deleteWork(stageId, workId) {
            if (confirm('‚ö†Ô∏è B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a c√¥ng vi·ªác n√†y?\n\nVi·ªác n√†y kh√¥ng th·ªÉ ho√†n t√°c.')) {
                markChanges();
                alert('üóëÔ∏è ƒê√£ x√≥a c√¥ng vi·ªác.');
            }
        }

        // Stage functions
        function editStage(stageId) {
            alert(`‚úèÔ∏è Ch·ªânh s·ª≠a giai ƒëo·∫°n ${stageId}:\n\n‚Ä¢ T√™n giai ƒëo·∫°n\n‚Ä¢ Th·ªùi gian th·ª±c hi·ªán\n‚Ä¢ M√¥ t·∫£\n‚Ä¢ ƒêi·ªÅu ki·ªán k√≠ch ho·∫°t\n‚Ä¢ T√†i nguy√™n c·∫ßn thi·∫øt`);
        }

        function duplicateStage(stageId) {
            if (confirm('üìã Sao ch√©p to√†n b·ªô giai ƒëo·∫°n n√†y?\n\nT·∫•t c·∫£ c√¥ng vi·ªác trong giai ƒëo·∫°n s·∫Ω ƒë∆∞·ª£c sao ch√©p.')) {
                markChanges();
                alert('‚úÖ ƒê√£ sao ch√©p giai ƒëo·∫°n.');
            }
        }

        function addStage() {
            if (confirm('‚ûï Th√™m giai ƒëo·∫°n m·ªõi?\n\nGiai ƒëo·∫°n m·ªõi s·∫Ω ƒë∆∞·ª£c th√™m v√†o cu·ªëi quy tr√¨nh.')) {
                markChanges();
                alert('üéâ ƒê√£ th√™m giai ƒëo·∫°n m·ªõi. H√£y th√™m c√¥ng vi·ªác v√†o giai ƒëo·∫°n n√†y.');
            }
        }

        // Save functions
        function saveWorkChanges() {
            markChanges();
            closeModal('workModal');
            alert('üíæ ƒê√£ l∆∞u thay ƒë·ªïi c√¥ng vi·ªác.');
        }

        function saveCriteriaChanges() {
            markChanges();
            closeModal('criteriaModal');
            alert('üìã ƒê√£ c·∫≠p nh·∫≠t ti√™u chu·∫©n ƒë√°nh gi√°.');
        }

        function saveNewWork() {
            const title = document.getElementById('newWorkTitle').value;
            if (!title.trim()) {
                alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p t√™n c√¥ng vi·ªác.');
                return;
            }
            
            markChanges();
            closeModal('addWorkModal');
            alert(`‚úÖ ƒê√£ th√™m c√¥ng vi·ªác: "${title}"`);
        }

        // Changes tracking
        function markChanges() {
            hasChanges = true;
            changeCount++;
            updateChangesBar();
            updateReadiness();
        }

        function updateChangesBar() {
            const bar = document.getElementById('saveChangesBar');
            const countSpan = document.getElementById('changesCount');
            
            if (hasChanges) {
                bar.classList.add('show');
                countSpan.textContent = `${changeCount} thay ƒë·ªïi`;
            } else {
                bar.classList.remove('show');
            }
        }

        function updateReadiness() {
            // Update readiness score when changes are made
            readinessScore = Math.min(83, readinessScore + (changeCount * 2)); // Cap at 83% (5/6 items)
        }

        function discardChanges() {
            if (confirm('‚ö†Ô∏è H·ªßy t·∫•t c·∫£ thay ƒë·ªïi?\n\nM·ªçi thay ƒë·ªïi s·∫Ω b·ªã m·∫•t.')) {
                hasChanges = false;
                changeCount = 0;
                updateChangesBar();
                alert('üîÑ ƒê√£ kh√¥i ph·ª•c v·ªÅ tr·∫°ng th√°i ban ƒë·∫ßu.');
            }
        }

        function saveAllChanges() {
            if (hasChanges) {
                // Simulate save
                setTimeout(() => {
                    hasChanges = false;
                    changeCount = 0;
                    updateChangesBar();
                    alert('üíæ ƒê√£ l∆∞u t·∫•t c·∫£ thay ƒë·ªïi!\n\nQuy tr√¨nh ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t theo t√πy ch·ªânh c·ªßa b·∫°n.');
                }, 1000);
            }
        }

        // Utility functions
        function expandAllStages() {
            alert('üìã Hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß 6 giai ƒëo·∫°n:\n\n3. D∆∞·ª°ng c√¢y chu·∫©n b·ªã ra hoa\n4. Ra hoa\n5. ChƒÉm s√≥c tr√°i\n6. Thu ho·∫°ch\n\nM·ªói giai ƒëo·∫°n c√≥ th·ªÉ t√πy ch·ªânh ri√™ng bi·ªát.');
        }

        function openDashboard() {
            alert('üìä M·ªü Dashboard:\n\n‚Ä¢ Ti·∫øn ƒë·ªô th·ª±c hi·ªán\n‚Ä¢ Chi ph√≠ theo d√µi\n‚Ä¢ L·ªãch nh·∫Øc vi·ªác\n‚Ä¢ B√°o c√°o t√¨nh h√¨nh');
        }

        function openSettings() {
            alert('‚öôÔ∏è C√†i ƒë·∫∑t h·ªá th·ªëng:\n\n‚Ä¢ Th√¥ng tin v∆∞·ªùn\n‚Ä¢ T√πy ch·ªçn th√¥ng b√°o\n‚Ä¢ K·∫øt n·ªëi chuy√™n gia\n‚Ä¢ Xu·∫•t/nh·∫≠p d·ªØ li·ªáu');
        }

        function importTemplate() {
            alert('üì• Nh·∫≠p template:\n\n‚Ä¢ Template c·ªßa n√¥ng d√¢n kh√°c\n‚Ä¢ Template theo v√πng mi·ªÅn\n‚Ä¢ Template theo gi·ªëng s·∫ßu ri√™ng\n‚Ä¢ Template theo quy m√¥');
        }

        function previewTimeline() {
            alert('üëÅÔ∏è Xem tr∆∞·ªõc timeline:\n\nüóìÔ∏è L·ªãch th·ª±c hi·ªán chi ti·∫øt\nüìä Bi·ªÉu ƒë·ªì Gantt\nüí∞ Ph√¢n b·ªï chi ph√≠ theo th·ªùi gian\nüë• Ph√¢n c√¥ng nh√¢n l·ª±c\nüéØ M·ªëc quan tr·ªçng');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-save changes periodically
            setInterval(() => {
                if (hasChanges) {
                    console.log('Auto-saving changes...');
                }
            }, 30000);

            // Close modals when clicking outside
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('show');
                    }
                });
            });

            // Add deployment button animation
            const deployBtn = document.getElementById('deploymentBtn');
            if (deployBtn) {
                deployBtn.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px) scale(1.02)';
                });
                
                deployBtn.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            }
        });
    </script>
</body>
</html>