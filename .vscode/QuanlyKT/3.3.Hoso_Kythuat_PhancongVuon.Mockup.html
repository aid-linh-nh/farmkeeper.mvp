<!DOCTYPE html>
<html lang="vi" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hồ Sơ Nhân Viên - Hệ Thống Quản Lý Hiệu Suất</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        .tab-active {
            border-color: #3B82F6;
            color: #3B82F6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 font-sans p-6 lg:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-white">Hồ Sơ Nhân Viên</h1>
            <p class="text-gray-400 mt-1">Quản lý thông tin, vai trò, và hiệu suất của đội ngũ kỹ sư.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column: Profile & Core Info -->
            <div class="lg:col-span-1">
                <div class="bg-gray-800 p-6 rounded-xl border border-gray-700 sticky top-8">
                    <div class="text-center">
                        <img id="avatar-preview" src="https://i.pravatar.cc/128?u=NV001" alt="Avatar" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-gray-600">
                        <h2 class="text-2xl font-bold text-white">Nguyễn Văn An</h2>
                        <p class="text-blue-400">Kỹ sư Cấp cao (Senior)</p>
                    </div>
                    <div class="mt-6">
                        <label for="avatar-upload" class="w-full text-center cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md inline-block">
                            Thay đổi Ảnh
                        </label>
                        <input type="file" id="avatar-upload" class="hidden" accept="image/*">
                    </div>
                    <div class="border-t border-gray-700 my-6"></div>
                    <div>
                        <h3 class="font-semibold text-white mb-4">Thông tin Cơ bản</h3>
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center"><i data-lucide="mail" class="w-4 h-4 mr-3 text-gray-400"></i><span>an.nguyen@company.com</span></div>
                            <div class="flex items-center"><i data-lucide="phone" class="w-4 h-4 mr-3 text-gray-400"></i><span>0901 234 567</span></div>
                            <div class="flex items-center"><i data-lucide="calendar" class="w-4 h-4 mr-3 text-gray-400"></i><span>Ngày vào làm: 15/03/2020</span></div>
                            <div class="flex items-center"><i data-lucide="user-check" class="w-4 h-4 mr-3 text-green-400"></i><span>Trạng thái: Đang hoạt động</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Detailed Form -->
            <div class="lg:col-span-2">
                <div class="bg-gray-800 p-8 rounded-xl border border-gray-700">
                    <form action="#" method="POST">
                        <!-- Section A: Thông Tin Định Danh & Cơ Bản -->
                        <section class="mb-10">
                            <h3 class="text-lg font-semibold text-white border-b border-gray-700 pb-3 mb-6">A. Thông Tin Định Danh & Cơ Bản</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="employee_id" class="block text-sm font-medium text-gray-300 mb-2">Mã nhân viên</label>
                                    <input type="text" id="employee_id" value="NV001" class="w-full bg-gray-700 border-gray-600 text-white rounded-md px-3 py-2" readonly>
                                </div>
                                <div>
                                    <label for="full_name" class="block text-sm font-medium text-gray-300 mb-2">Họ và tên</label>
                                    <input type="text" id="full_name" value="Nguyễn Văn An" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                </div>
                                <div>
                                    <label for="join_date" class="block text-sm font-medium text-gray-300 mb-2">Ngày vào làm</label>
                                    <input type="date" id="join_date" value="2020-03-15" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                </div>
                                <div>
                                    <label for="status" class="block text-sm font-medium text-gray-300 mb-2">Trạng thái</label>
                                    <select id="status" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                        <option selected>Đang hoạt động</option>
                                        <option>Nghỉ phép</option>
                                        <option>Đã nghỉ việc</option>
                                    </select>
                                </div>
                            </div>
                        </section>

                        <!-- Section B: Thông Tin Vai Trò & Năng Lực -->
                        <section class="mb-10">
                            <h3 class="text-lg font-semibold text-white border-b border-gray-700 pb-3 mb-6">B. Thông Tin Vai Trò & Năng Lực</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="job_title" class="block text-sm font-medium text-gray-300 mb-2">Chức danh</label>
                                    <input type="text" id="job_title" value="Kỹ sư Nông nghiệp" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                </div>
                                <div>
                                    <label for="specialty" class="block text-sm font-medium text-gray-300 mb-2">Chuyên môn chính</label>
                                    <input type="text" id="specialty" value="Sầu riêng, Cây có múi" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                </div>
                                <div>
                                    <label for="engineer_level" class="block text-sm font-medium text-gray-300 mb-2">Cấp bậc</label>
                                    <select id="engineer_level" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                        <option value="0.8">Junior</option>
                                        <option value="1.0">Standard</option>
                                        <option value="1.2" selected>Senior</option>
                                        <option value="1.4">Expert</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="level_coefficient" class="block text-sm font-medium text-gray-300 mb-2">Hệ số Cấp bậc</label>
                                    <input type="number" id="level_coefficient" value="1.2" class="w-full bg-gray-700 border-gray-600 text-white rounded-md px-3 py-2" readonly>
                                </div>
                            </div>
                        </section>

                        <!-- Section C: Thông tin Nhân sự & Đãi ngộ -->
                        <section class="mb-10">
                            <h3 class="text-lg font-semibold text-white border-b border-gray-700 pb-3 mb-6">C. Thông tin Nhân sự & Đãi ngộ</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="base_salary" class="block text-sm font-medium text-gray-300 mb-2">Lương Cơ bản (VNĐ)</label>
                                    <input type="number" id="base_salary" value="18000000" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                </div>
                                <div>
                                    <label for="contract_type" class="block text-sm font-medium text-gray-300 mb-2">Loại Hợp đồng</label>
                                    <select id="contract_type" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                        <option>Không xác định thời hạn</option>
                                        <option selected>Xác định thời hạn</option>
                                        <option>Thử việc</option>
                                    </select>
                                </div>
                            </div>
                        </section>

                        <!-- Section D: Thông Tin Quản Lý & Phân Công -->
                        <section class="mb-10">
                            <h3 class="text-lg font-semibold text-white border-b border-gray-700 pb-3 mb-6">D. Thông Tin Quản Lý & Phân Công</h3>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="manager_id" class="block text-sm font-medium text-gray-300 mb-2">Người quản lý trực tiếp</label>
                                    <select id="manager_id" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                        <option>Lê Thị Minh - Trưởng phòng Kỹ thuật</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="region_id" class="block text-sm font-medium text-gray-300 mb-2">Vùng/Khu vực phụ trách</label>
                                    <select id="region_id" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">
                                        <option selected>Đắk Lắk</option>
                                        <option>Gia Lai</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mt-6">
                                <label class="block text-sm font-medium text-gray-300 mb-2">Danh sách Vườn đang phụ trách (Chỉ xem)</label>
                                <div class="bg-gray-900/50 p-4 rounded-md border border-gray-700 h-64 overflow-y-auto">
                                    <ul class="space-y-3">
                                        <li class="p-3 rounded-md bg-gray-700/50 flex justify-between items-center"><div><p class="font-semibold text-white">Vườn sầu riêng ông Năm</p><p class="text-xs text-gray-400">FARM_DL_001 | 6.2 ha</p></div><div class="text-right"><p class="text-xs text-gray-500">HS Phức tạp</p><span class="px-2 py-1 text-xs font-semibold rounded-full bg-yellow-900 text-yellow-300">1.32</span></div></li>
                                        <li class="p-3 rounded-md bg-gray-700/50 flex justify-between items-center"><div><p class="font-semibold text-white">Vườn anh Bảy</p><p class="text-xs text-gray-400">FARM_DL_012 | 1.8 ha</p></div><div class="text-right"><p class="text-xs text-gray-500">HS Phức tạp</p><span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-900 text-green-300">0.81</span></div></li>
                                        <li class="p-3 rounded-md bg-gray-700/50 flex justify-between items-center"><div><p class="font-semibold text-white">Trang trại GreenFarm</p><p class="text-xs text-gray-400">FARM_DL_025 | 8.0 ha</p></div><div class="text-right"><p class="text-xs text-gray-500">HS Phức tạp</p><span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-900 text-red-300">1.55</span></div></li>
                                    </ul>
                                </div>
                                <p class="text-xs text-gray-500 mt-2 italic">Lưu ý: Việc phân công vườn được thực hiện trong "Module Phân công & Quản lý Vận hành".</p>
                            </div>
                        </section>

                        <!-- Section E: Thông Tin Hiệu Suất -->
                        <section class="mb-10">
                            <h3 class="text-lg font-semibold text-white border-b border-gray-700 pb-3 mb-6">E. Thông Tin Hiệu Suất</h3>
                            <div class="border-b border-gray-700">
                                <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                                    <button type="button" class="tab-btn tab-active whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm" data-target="current-performance">Hiệu suất Kỳ hiện tại</button>
                                    <button type="button" class="tab-btn text-gray-400 hover:text-white whitespace-nowrap py-3 px-1 border-b-2 border-transparent font-medium text-sm" data-target="performance-history">Lịch sử Hiệu suất</button>
                                </nav>
                            </div>
                            <div class="mt-6">
                                <div id="current-performance" class="tab-content">
                                    <div class="bg-gray-900/50 p-4 rounded-md border border-gray-700 mb-6"><p class="text-sm"><span class="font-semibold text-gray-400">Kỳ đánh giá:</span> Q4/2025</p><p class="text-sm mt-1"><span class="font-semibold text-gray-400">Bộ Khung Áp dụng:</span> Tối ưu Đầu vào & Liên kết Đầu ra</p></div>
                                    <div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-400"><thead class="text-xs text-gray-300 uppercase bg-gray-700/50"><tr><th class="px-4 py-3">Tên KPI</th><th class="px-4 py-3 text-center">Trọng số</th><th class="px-4 py-3">Mục tiêu Cá nhân</th><th class="px-4 py-3">Kết quả Thực tế</th><th class="px-4 py-3 w-1/4">Tỷ lệ Hoàn thành</th><th class="px-4 py-3 text-center">Điểm</th></tr></thead><tbody><tr class="border-b border-gray-700"><td class="px-4 py-4 font-medium text-white">Doanh số Vật tư</td><td class="px-4 py-4 text-center">35%</td><td class="px-4 py-4">432 Tr</td><td class="px-4 py-4">450 Tr</td><td class="px-4 py-4"><div class="w-full bg-gray-700 rounded-full h-2.5"><div class="bg-green-500 h-2.5 rounded-full" style="width: 100%"></div></div><p class="text-xs text-right mt-1">104%</p></td><td class="px-4 py-4 text-center font-bold text-green-400">1.0</td></tr><tr class="border-b border-gray-700"><td class="px-4 py-4 font-medium text-white">Chất lượng Nông sản</td><td class="px-4 py-4 text-center">15%</td><td class="px-4 py-4">95 điểm</td><td class="px-4 py-4">98 điểm</td><td class="px-4 py-4"><div class="w-full bg-gray-700 rounded-full h-2.5"><div class="bg-green-500 h-2.5 rounded-full" style="width: 100%"></div></div><p class="text-xs text-right mt-1">103%</p></td><td class="px-4 py-4 text-center font-bold text-green-400">1.0</td></tr><tr class="border-b border-gray-700"><td class="px-4 py-4 font-medium text-white">Tỷ lệ Chuyển đổi HĐ</td><td class="px-4 py-4 text-center">15%</td><td class="px-4 py-4">60%</td><td class="px-4 py-4">50%</td><td class="px-4 py-4"><div class="w-full bg-gray-700 rounded-full h-2.5"><div class="bg-yellow-500 h-2.5 rounded-full" style="width: 83%"></div></div><p class="text-xs text-right mt-1">83%</p></td><td class="px-4 py-4 text-center font-bold text-yellow-400">0.8</td></tr></tbody></table></div>
                                    <div class="mt-6 bg-gray-900/50 p-6 rounded-lg border border-gray-700">
                                        <div class="flex justify-between items-center mb-4">
                                            <h4 class="font-semibold text-white">Tổng kết Hiệu suất & Thưởng (Dự kiến)</h4>
                                            <button id="open-bonus-modal-btn" type="button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded-lg flex items-center text-xs">
                                                <i data-lucide="calculator" class="w-4 h-4 mr-2"></i> Xem Chi tiết Tính thưởng
                                            </button>
                                        </div>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                                            <div class="bg-gray-800 p-4 rounded-lg"><p class="text-sm text-gray-400">Điểm Hiệu Suất Tổng Hợp</p><p class="text-2xl font-bold text-green-400">1.04</p><p class="text-xs text-gray-500 mt-1">Xếp loại: Tốt</p></div>
                                            <div class="bg-gray-800 p-4 rounded-lg"><p class="text-sm text-gray-400">Thưởng Hiệu suất Cá nhân</p><p class="text-2xl font-bold text-white">36,000,000 VNĐ</p><p class="text-xs text-gray-500 mt-1">(Quỹ Thưởng Cơ Sở × HS Bậc Thưởng)</p></div>
                                            <div class="bg-gray-800 p-4 rounded-lg"><p class="text-sm text-gray-400">Thưởng Cuối Cùng</p><p class="text-2xl font-bold text-yellow-400">39,600,000 VNĐ</p><p class="text-xs text-gray-500 mt-1">(× HS Kinh doanh Chung: 1.1)</p></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="performance-history" class="tab-content hidden">
                                    <div class="overflow-x-auto"><table class="w-full text-sm text-left text-gray-400"><thead class="text-xs text-gray-300 uppercase bg-gray-700/50"><tr><th class="px-4 py-3">Kỳ đánh giá</th><th class="px-4 py-3 text-center">Điểm Tổng hợp</th><th class="px-4 py-3 text-center">Xếp loại</th><th class="px-4 py-3 text-right">Thưởng Cuối Cùng</th><th class="px-4 py-3 text-center">Hành động</th></tr></thead><tbody><tr class="border-b border-gray-700"><td class="px-4 py-4 font-medium text-white">Q3/2025</td><td class="px-4 py-4 text-center font-bold text-green-400">1.12</td><td class="px-4 py-4 text-center"><span class="px-2 py-1 text-xs font-medium rounded-full bg-green-900 text-green-300">Tốt</span></td><td class="px-4 py-4 text-right font-semibold text-yellow-400">33,000,000 VNĐ</td><td class="px-4 py-4 text-center"><button type="button" class="text-blue-400 hover:underline text-xs">Xem chi tiết</button></td></tr><tr class="border-b border-gray-700"><td class="px-4 py-4 font-medium text-white">Q2/2025</td><td class="px-4 py-4 text-center font-bold text-purple-400">1.21</td><td class="px-4 py-4 text-center"><span class="px-2 py-1 text-xs font-medium rounded-full bg-purple-900 text-purple-300">Vượt trội</span></td><td class="px-4 py-4 text-right font-semibold text-purple-400">54,000,000 VNĐ</td><td class="px-4 py-4 text-center"><button type="button" class="text-blue-400 hover:underline text-xs">Xem chi tiết</button></td></tr><tr class="border-b border-gray-700"><td class="px-4 py-4 font-medium text-white">Q1/2025</td><td class="px-4 py-4 text-center font-bold text-yellow-400">0.95</td><td class="px-4 py-4 text-center"><span class="px-2 py-1 text-xs font-medium rounded-full bg-yellow-900 text-yellow-300">Đạt</span></td><td class="px-4 py-4 text-right font-semibold text-yellow-500">21,000,000 VNĐ</td><td class="px-4 py-4 text-center"><button type="button" class="text-blue-400 hover:underline text-xs">Xem chi tiết</button></td></tr></tbody></table></div>
                                </div>
                            </div>
                        </section>

                        <!-- Section F: Thông Tin Đào Tạo & Phát Triển -->
                        <section class="mb-10">
                            <h3 class="text-lg font-semibold text-white border-b border-gray-700 pb-3 mb-6">F. Thông Tin Đào Tạo & Phát Triển</h3>
                            <div>
                                <label for="training_history" class="block text-sm font-medium text-gray-300 mb-2">Lịch sử đào tạo</label>
                                <textarea id="training_history" rows="4" class="w-full bg-gray-900 border-gray-600 text-white rounded-md px-3 py-2">- Q1/2025: Kỹ thuật xử lý ra hoa nghịch vụ trên sầu riêng.
- Q2/2025: Kỹ năng đàm phán và thuyết phục khách hàng.</textarea>
                            </div>
                        </section>
                        <!-- Section G: Quản Lý Tài Liệu & Hồ Sơ -->
                        <section>
                            <div class="flex justify-between items-center border-b border-gray-700 pb-3 mb-6">
                                <h3 class="text-lg font-semibold text-white">G. Quản Lý Tài Liệu & Hồ Sơ</h3>
                                <label for="document-upload" class="cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md flex items-center text-sm">
                                    <i data-lucide="upload-cloud" class="w-4 h-4 mr-2"></i> Tải lên
                                </label>
                                <input type="file" id="document-upload" class="hidden" multiple>
                            </div>
                            <div class="space-y-4">
                                <div class="bg-gray-900 p-4 rounded-md border border-gray-700 flex items-center justify-between"><div class="flex items-center"><i data-lucide="file-text" class="w-8 h-8 text-blue-400 mr-4 shrink-0"></i><div><p class="font-medium text-white">Hợp đồng lao động 2025.pdf</p><p class="text-xs text-gray-500">Tải lên ngày: 15/03/2025</p></div></div><div class="flex items-center space-x-3"><button type="button" class="text-gray-400 hover:text-white"><i data-lucide="download" class="w-5 h-5"></i></button><button type="button" class="text-red-500 hover:text-red-400"><i data-lucide="trash-2" class="w-5 h-5"></i></button></div></div>
                                <div class="bg-gray-900 p-4 rounded-md border border-gray-700 flex items-center justify-between"><div class="flex items-center"><i data-lucide="file-badge-2" class="w-8 h-8 text-green-400 mr-4 shrink-0"></i><div><p class="font-medium text-white">Bằng Đại học Nông Lâm.pdf</p><p class="text-xs text-gray-500">Tải lên ngày: 15/03/2025</p></div></div><div class="flex items-center space-x-3"><button type="button" class="text-gray-400 hover:text-white"><i data-lucide="download" class="w-5 h-5"></i></button><button type="button" class="text-red-500 hover:text-red-400"><i data-lucide="trash-2" class="w-5 h-5"></i></button></div></div>
                            </div>
                        </section>

                        <!-- Action Buttons -->
                        <div class="mt-10 flex justify-end space-x-4">
                            <button type="button" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-md">Hủy</button>
                            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-md">Lưu Thay Đổi</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bonus Calculation Logic Modal -->
    <div id="bonus-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden modal-backdrop opacity-0">
        <div class="bg-gray-800 rounded-xl border border-gray-700 w-full max-w-3xl max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-6 border-b border-gray-700 shrink-0">
                <div><h2 class="text-2xl font-bold text-white">Chi tiết Logic Tính thưởng</h2><p class="text-sm text-gray-400">Kỳ Q4/2025 - Kỹ sư: Nguyễn Văn An</p></div>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>
            <div class="p-6 overflow-y-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-6">
                        <div><h3 class="text-lg font-semibold text-white mb-3">1. Tham số Đầu vào</h3><div class="space-y-3 bg-gray-900/50 p-4 rounded-lg"><div class="flex justify-between text-sm"><span class="text-gray-400">Điểm Hiệu Suất Tổng Hợp:</span><span class="font-bold text-green-400">1.04</span></div><div class="flex justify-between text-sm"><span class="text-gray-400">Lương Cơ bản:</span><span class="font-bold text-white">18,000,000 VNĐ</span></div></div></div>
                        <div><h3 class="text-lg font-semibold text-white mb-3">2. Tham số Hệ thống</h3><div class="space-y-3 bg-gray-900/50 p-4 rounded-lg"><div class="flex justify-between text-sm"><span class="text-gray-400">Phương án tính Quỹ thưởng:</span><span class="font-semibold text-white">Theo tháng lương</span></div><div class="flex justify-between text-sm"><span class="text-gray-400">Giá trị Quỹ thưởng:</span><span class="font-semibold text-white">2.0 tháng / quý</span></div><div class="flex justify-between text-sm"><span class="text-gray-400">Hệ số Kinh doanh Chung (kỳ này):</span><span class="font-semibold text-white">1.1</span></div></div></div>
                    </div>
                    <div class="bg-gray-700/50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-white mb-4 text-center">3. Quy trình Tính toán</h3>
                        <ol class="relative border-l border-gray-600 space-y-8">
                            <li class="ml-6"><span class="absolute flex items-center justify-center w-6 h-6 bg-blue-900 rounded-full -left-3 ring-4 ring-gray-800"><span class="text-blue-400 font-bold text-xs">1</span></span><h4 class="font-semibold text-gray-300">Xác định Quỹ Thưởng Cơ Sở</h4><p class="text-xs text-gray-400">18,000,000 (Lương) × 2.0 (Tháng) =</p><p class="font-bold text-lg text-white">36,000,000 VNĐ</p></li>
                            <li class="ml-6"><span class="absolute flex items-center justify-center w-6 h-6 bg-blue-900 rounded-full -left-3 ring-4 ring-gray-800"><span class="text-blue-400 font-bold text-xs">2</span></span><h4 class="font-semibold text-gray-300">Xác định Hệ số Bậc Thưởng</h4><p class="text-xs text-gray-400">Điểm 1.04 → Xếp loại "Tốt" → Hệ số =</p><p class="font-bold text-lg text-white">1.0</p></li>
                             <li class="ml-6"><span class="absolute flex items-center justify-center w-6 h-6 bg-purple-900 rounded-full -left-3 ring-4 ring-gray-800"><i data-lucide="award" class="w-4 h-4 text-purple-400"></i></span><h4 class="font-semibold text-gray-300">Thưởng Hiệu suất Cá nhân</h4><p class="text-xs text-gray-400">36,000,000 (Quỹ) × 1.0 (HS Bậc) =</p><p class="font-bold text-lg text-purple-400">36,000,000 VNĐ</p></li>
                            <li class="ml-6"><span class="absolute flex items-center justify-center w-6 h-6 bg-green-900 rounded-full -left-3 ring-4 ring-gray-800"><i data-lucide="check-circle" class="w-4 h-4 text-green-400"></i></span><h4 class="font-semibold text-gray-300">Thưởng Cuối Cùng</h4><p class="text-xs text-gray-400">36,000,000 (Thưởng Cá nhân) × 1.1 (HS Kinh doanh) =</p><p class="font-bold text-2xl text-green-400">39,600,000 VNĐ</p></li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Script to auto-update level coefficient
        const levelSelect = document.getElementById('engineer_level');
        const coefficientInput = document.getElementById('level_coefficient');
        if (levelSelect && coefficientInput) {
            levelSelect.addEventListener('change', function() {
                coefficientInput.value = this.value;
            });
        }

        // Script for avatar preview
        const avatarUpload = document.getElementById('avatar-upload');
        const avatarPreview = document.getElementById('avatar-preview');
        if (avatarUpload && avatarPreview) {
            avatarUpload.addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        avatarPreview.src = e.target.result;
                    }
                    reader.readAsDataURL(file);
                }
            });
        }

        // Tab switching logic
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        if (tabButtons.length > 0 && tabContents.length > 0) {
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => {
                        btn.classList.remove('tab-active');
                        btn.classList.add('text-gray-400', 'hover:text-white', 'border-transparent');
                    });
                    button.classList.add('tab-active');
                    button.classList.remove('text-gray-400', 'hover:text-white', 'border-transparent');
                    
                    const target = button.dataset.target;
                    tabContents.forEach(content => {
                        if (content.id === target) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });
        }

        // Bonus Modal Logic
        const bonusModal = document.getElementById('bonus-modal');
        const openBonusModalBtn = document.getElementById('open-bonus-modal-btn');
        const closeModalBtn = document.getElementById('close-modal-btn');

        if(bonusModal && openBonusModalBtn && closeModalBtn) {
            openBonusModalBtn.addEventListener('click', () => {
                bonusModal.classList.remove('hidden');
                setTimeout(() => bonusModal.classList.remove('opacity-0'), 10);
            });

            closeModalBtn.addEventListener('click', () => {
                bonusModal.classList.add('opacity-0');
                setTimeout(() => bonusModal.classList.add('hidden'), 300);
            });
        }
    </script>
</body>
</html>
